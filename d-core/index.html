<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D'CORE - Regalos Artesanales con Corazón en Ecuador</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Descubre en D'CORE regalos únicos y artesanales, hechos con el corazón. Tejidos, maderas talladas y bordados que cuentan una historia. Envíos a todo Ecuador.">
    <meta name="keywords" content="regalos artesanales Ecuador, detalles personalizados, madera tallada, muñecos de lana, bordados a mano, D'CORE, regalos originales, artesanías ecuatorianas, cursos de tejido, asesorías, calendario de regalos, muebles a medida">
    <meta name="author" content="D'CORE">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.dcore.com/">
    <meta property="og:title" content="D'CORE - Un Legado de Detalles del Corazón">
    <meta property="og:description" content="Regalos únicos y artesanales hechos con amor. Tejidos, maderas talladas y bordados que cuentan una historia.">
    <meta property="og:image" content="https://images.pexels.com/photos/190537/pexels-photo-190537.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.dcore.com/">
    <meta property="twitter:title" content="D'CORE - Un Legado de Detalles del Corazón">
    <meta property="twitter:description" content="Regalos únicos y artesanales hechos con amor. Tejidos, maderas talladas y bordados que cuentan una historia.">
    <meta property="twitter:image" content="https://images.pexels.com/photos/190537/pexels-photo-190537.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1">

    <link rel="icon" href="./logo-dcore.jpg" type="image/jpeg">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #FFF6E0;
            color: #333;
            overflow-x: hidden;
        }
        .font-serif { font-family: 'Cormorant Garamond', serif; }
        
        /* Paleta de colores */
        .bg-red { background-color: #E63946; }
        .bg-green { background-color: #339989; }
        .bg-orange { background-color: #F7B500; }
        .text-red { color: #E63946; }
        .text-green { color: #339989; }
        .text-orange { color: #F7B500; }

        .btn-primary {
            background-color: #E63946;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            box-shadow: 0 4px 10px rgba(230, 57, 70, 0.4);
            border: 2px solid transparent;
            text-align: center;
            white-space: nowrap;
        }
        .btn-primary:hover {
            background-color: transparent;
            color: #E63946;
            border-color: #E63946;
            box-shadow: 0 6px 15px rgba(230, 57, 70, 0.2);
            transform: translateY(-4px);
        }

        /* Animation Improvements */
        .fade-in-up { 
            opacity: 0; 
            transform: translateY(50px); 
            transition: opacity 0.8s cubic-bezier(0.19, 1, 0.22, 1), transform 0.8s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .in-view { 
            opacity: 1; 
            transform: translateY(0); 
        }
        .stagger-child { 
            opacity: 0; 
            transform: translateY(30px); 
            transition: opacity 0.7s cubic-bezier(0.19, 1, 0.22, 1), transform 0.7s cubic-bezier(0.19, 1, 0.22, 1); 
        }
        .in-view .stagger-child { 
            opacity: 1; 
            transform: translateY(0); 
        }
        
        .product-card {
            background-color: #fff;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1), box-shadow 0.4s cubic-bezier(0.19, 1, 0.22, 1);
            overflow: hidden;
            position: relative;
        }
        .product-card:hover {
            transform: translateY(-12px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.12);
        }
        .product-card img { transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1); }
        .product-card:hover img { transform: scale(1.08); }
        
        #cart-overlay, #chatbot-overlay {
            position: fixed; inset: 0; background-color: rgba(0,0,0,0.5); z-index: 49; opacity: 0; transition: opacity 0.5s cubic-bezier(0.23, 1, 0.32, 1); pointer-events: none;
        }
        #cart-overlay.open, #chatbot-overlay.open { opacity: 1; pointer-events: auto; }

        .slide-in-right { transform: translateX(100%); transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1); }
        .slide-in-right.open { transform: translateX(0); }
        
        .slide-in-bottom { transform: translateY(100%); transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1); }
        .slide-in-bottom.open { transform: translateY(0); }

        .cart-count {
            top: -0.5rem; right: -0.5rem; background-color: #E63946; color: white; border-radius: 9999px; font-size: 0.75rem; width: 1.25rem; height: 1.25rem; display: flex; justify-content: center; align-items: center; font-weight: bold;
        }
        
        .sale-badge { position: absolute; top: 1rem; left: 1rem; background-color: #E63946; color: white; padding: 0.25rem 0.75rem; border-radius: 9999px; font-weight: bold; font-size: 0.875rem; z-index: 10; }
        
        header { transition: background-color 0.4s ease, box-shadow 0.4s ease; }
        header.scrolled { background-color: rgba(255, 246, 224, 0.95); box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        
        /* --- Luminous Platinum Effect --- */
        .platinum-text {
            font-weight: bold;
            color: #d1d5db; /* A base silver color */
            background: linear-gradient(120deg, #e5e7eb, #d1d5db, #9ca3af, #d1d5db, #e5e7eb);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 5s linear infinite;
        }
        @keyframes shimmer {
            0% { background-position: 200% 50%; }
            100% { background-position: -200% 50%; }
        }

        /* --- Modern Chatbot Design --- */
        #chatbot-btn-trigger { z-index: 50; animation: pulse 2s infinite; }
        #chatbot-btn-trigger.hidden { display: none; }
        
        #chatbot-modal {
            max-width: 400px;
            max-height: 90vh;
            bottom: 0; right: 0; left: auto;
            margin: 0 1rem 0 1rem;
            border-radius: 1.5rem 1.5rem 0 0;
            background: #f9fafb;
            display: flex; flex-direction: column;
            overflow: hidden;
            z-index: 50;
        }
        @media (min-width: 768px) {
            #chatbot-modal {
                margin: 0 2rem 0 0;
                height: 70vh;
                max-height: 650px;
            }
        }

        .chatbot-header {
            background: linear-gradient(135deg, #339989, #2b7d72);
            color: white;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        .chatbot-header h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
        }
        .chatbot-header button { color: white; opacity: 0.8; transition: opacity 0.3s; }
        .chatbot-header button:hover { opacity: 1; }

        #chat-window {
            padding: 1.5rem;
            flex-grow: 1;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #339989 #f0f0f0;
        }
        #chat-window::-webkit-scrollbar { width: 6px; }
        #chat-window::-webkit-scrollbar-track { background: #f0f0f0; }
        #chat-window::-webkit-scrollbar-thumb { background-color: #339989; border-radius: 6px; }

        .message {
            max-width: 85%;
            padding: 0.75rem 1.25rem;
            margin-bottom: 1rem;
            line-height: 1.5;
            word-wrap: break-word;
        }
        .user-message {
            background-color: #E63946;
            color: white;
            border-radius: 1.5rem 1.5rem 0.25rem 1.5rem;
            align-self: flex-end;
        }
        .bot-message {
            background-color: #e5e7eb;
            color: #1f2937;
            border-radius: 1.5rem 1.5rem 1.5rem 0.25rem;
            align-self: flex-start;
        }

        .chat-input-area {
            padding: 1rem 1.5rem;
            background: #fff;
            border-top: 1px solid #e5e7eb;
            flex-shrink: 0;
        }
        #chat-options { margin-bottom: 0.75rem; }
        .chat-options-container {
            display: flex; flex-wrap: wrap; gap: 0.5rem;
        }
        .chat-option-btn {
            background-color: #339989; color: white;
            padding: 0.5rem 1rem; border-radius: 9999px;
            font-weight: 500; font-size: 0.875rem;
            cursor: pointer; transition: background-color 0.3s;
            border: 0;
        }
        .chat-option-btn:hover { background-color: #2b7d72; }

        #chat-input {
            border: 2px solid #e5e7eb;
            transition: border-color 0.3s;
        }
        #chat-input:focus { border-color: #339989; outline: none; }
        
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(51, 153, 137, 0.7); }
            70% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(51, 153, 137, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(51, 153, 137, 0); }
        }
        
        /* Calendar styles */
        .calendar-container {
            display: grid; grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem; text-align: center;
        }
        .calendar-day {
            padding: 0.5rem; border-radius: 0.5rem;
            cursor: pointer; transition: all 0.2s ease;
            position: relative;
        }
        .calendar-day.current-month { background-color: #f3f4f6; }
        .calendar-day.today { background-color: #E63946; color: white; font-weight: bold; }
        .calendar-day.event { border: 2px solid #339989; }
        .calendar-day.user-event { border: 2px solid #F7B500; }
        .calendar-day:hover { background-color: #ddd; }
        .calendar-day:not(.current-month) { color: #aaa; }

        @media (max-width: 768px) {
            .calendar-container { gap: 0.25rem; }
            .calendar-day { padding: 0.25rem; font-size: 0.75rem; }
        }
        
        /* NEW Countdown timer styles */
        .countdown-container {
            display: flex;
            justify-content: center;
            align-items-center;
            gap: 1.5rem; /* Reduced gap */
            padding: 2rem 0;
        }
        .countdown-item {
            display: flex; flex-direction: column;
            align-items: center;
            transition: transform 0.4s;
        }
        .countdown-item:hover { transform: translateY(-8px); }
        .countdown-value {
            font-size: 4rem; /* Increased size */
            font-weight: 700;
            line-height: 1;
        }
        .countdown-label {
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #4b5563;
        }
        @media (max-width: 640px) {
            .countdown-container { gap: 1rem; }
            .countdown-value { font-size: 2.5rem; }
            .countdown-label { font-size: 0.75rem; letter-spacing: 1px;}
        }

        .course-details li {
            position: relative; padding-left: 1.5rem; margin-bottom: 0.5rem;
        }
        .course-details li:before {
            content: "✓"; position: absolute; left: 0;
            color: #339989; font-weight: bold;
        }

        /* Carousel Styles */
        .carousel-button {
            position: absolute; top: 50%; transform: translateY(-50%);
            background-color: rgba(76, 60, 52, 0.5);
            color: white; border: none;
            width: 2.75rem; height: 2.75rem;
            display: flex; align-items: center; justify-content: center;
            border-radius: 9999px; cursor: pointer; z-index: 10;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .carousel-button:hover {
            background-color: rgba(76, 60, 52, 0.8);
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 6px 15px rgba(0,0,0,0.25);
        }
        .carousel-button.prev { left: 0.75rem; }
        .carousel-button.next { right: 0.75rem; }
        
        .carousel-container {
            position: relative; width: 100%; height: 320px;
            overflow: hidden; border-radius: 1.5rem;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        @media (min-width: 768px) { 
            .carousel-container { height: 60vh; max-height: 550px; }
        }
        
        .carousel-track {
            display: flex; height: 100%;
            transition: transform 0.7s cubic-bezier(0.65, 0, 0.35, 1);
        }
        .carousel-slide {
            min-width: 100%; height: 100%;
            background-size: cover; background-position: center;
        }

        /* Testimonial Carousel Styles */
        #testimonial-slider-wrapper { overflow: hidden; width: 100%; }
        #testimonial-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        .testimonial-card {
            width: 100%; flex-shrink: 0;
            box-sizing: border-box; padding: 0 0.5rem;
        }
        @media (min-width: 768px) {
            #testimonial-track {
                display: grid; grid-template-columns: repeat(2, 1fr);
                gap: 2rem; transform: none !important;
            }
            .testimonial-card { width: auto; padding: 0; }
        }
        @media (min-width: 1024px) {
            #testimonial-track { grid-template-columns: repeat(3, 1fr); }
        }
    </style>
</head>
<body class="bg-yellow-50 text-gray-800">

    <!-- Header & Navigation -->
    <header class="sticky top-0 z-40 bg-yellow-50/80 backdrop-blur-lg py-4">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <a href="#inicio" class="flex items-center space-x-3">
                <img src="./logo-dcore.jpg" alt="D'CORE Logo" class="w-12 h-12 rounded-full">
                <span class="text-3xl font-serif font-bold text-red">D'CORE</span>
            </a>
            <nav class="hidden md:flex space-x-8 text-lg font-medium">
                <a href="#nosotros" class="hover:text-red transition-colors">Nuestra Historia</a>
                <a href="#productos" class="hover:text-red transition-colors">Productos</a>
                <a href="#cursos" class="hover:text-red transition-colors">Cursos</a>
                <a href="#asesorias" class="hover:text-red transition-colors">Asesorías</a>
                <a href="#testimonios" class="hover:text-red transition-colors">Opiniones</a>
            </nav>
            <div class="flex items-center space-x-4">
                <button id="cart-btn" class="relative">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-red" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                    <span id="cart-count" class="absolute cart-count hidden">0</span>
                </button>
                <button id="chatbot-btn-trigger" class="fixed bottom-4 right-4 bg-green text-white p-4 rounded-full shadow-lg z-50 hover:bg-green/80 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.486 2 2 6.486 2 12c0 3.864 1.95 7.378 5 9.424l-1.928 1.928.707.707 2.016-2.016c.394.073.799.112 1.21.112 5.514 0 10-4.486 10-10S17.514 2 12 2zM8 13.5c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5 1.5.672 1.5 1.5-.672 1.5-1.5 1.5zM12 13.5c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5 1.5.672 1.5 1.5-.672 1.5-1.5 1.5zM16 13.5c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5 1.5.672 1.5 1.5-.672 1.5-1.5 1.5z"/></svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Cart Modal -->
    <div id="cart-overlay"></div>
    <div id="cart-modal" class="slide-in-right fixed top-0 right-0 h-full w-full md:w-96 bg-white shadow-2xl z-50 p-6 flex flex-col">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold font-serif text-red">Tu Carrito</h2>
            <button id="close-cart-btn" class="text-red text-4xl leading-none">&times;</button>
        </div>
        <div id="cart-items" class="flex-1 overflow-y-auto space-y-4 pr-2"></div>
        <div id="cart-summary" class="mt-6 pt-4 border-t border-gray-200">
            <div class="flex justify-between items-center text-xl font-bold mb-4"><span class="font-serif">Total:</span><span id="cart-total">$0.00</span></div>
            <button id="whatsapp-btn" class="btn-primary w-full text-center">Enviar por WhatsApp</button>
        </div>
    </div>
    
    <!-- Chatbot Modal -->
    <div id="chatbot-overlay"></div>
    <div id="chatbot-modal" class="slide-in-bottom fixed w-full md:w-96 bg-white shadow-2xl flex flex-col">
        <div class="chatbot-header">
            <div class="flex items-center space-x-3">
                <svg class="w-8 h-8" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M50 99.5C77.3381 99.5 99.5 77.3381 99.5 50C99.5 22.6619 77.3381 0.5 50 0.5C22.6619 0.5 0.5 22.6619 0.5 50C0.5 77.3381 22.6619 99.5 50 99.5Z" fill="#E5E7EB"/><path d="M50 86C69.8823 86 86 69.8823 86 50C86 30.1177 69.8823 14 50 14C30.1177 14 14 30.1177 14 50C14 69.8823 30.1177 86 50 86Z" fill="white"/><path d="M50 78.6154C65.8071 78.6154 78.6154 65.8071 78.6154 50C78.6154 34.1929 65.8071 21.3846 50 21.3846C34.1929 21.3846 21.3846 34.1929 21.3846 50C21.3846 65.8071 34.1929 78.6154 50 78.6154Z" stroke="#339989" stroke-width="5"/><path d="M60.0579 59.5C57.4379 62.5 53.8699 64.5 50.0009 64.5C46.1319 64.5 42.5639 62.5 39.9439 59.5" stroke="#339989" stroke-width="5" stroke-linecap="round"/></svg>
                <h2 class="font-serif text-xl font-bold">Asistente D'CORE</h2>
            </div>
            <button id="close-chatbot-btn" class="text-3xl leading-none">&times;</button>
        </div>
        <div id="chat-window" class="flex flex-col space-y-2 flex-1"></div>
        <div class="chat-input-area">
            <div id="chat-options" class="chat-options-container"></div>
            <div class="flex space-x-2">
                <input type="text" id="chat-input" class="flex-1 rounded-full px-4 py-2 bg-gray-100 focus:outline-none focus:ring-2 focus:ring-green" placeholder="Escribe tu mensaje...">
                <button id="send-btn" class="bg-green text-white rounded-full p-2.5 hover:bg-green/80 transition-colors flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section id="inicio" class="relative min-h-screen flex items-center justify-center text-center px-6 overflow-hidden bg-yellow-50">
            <div class="relative z-10 fade-in-up in-view">
                <div class="relative inline-block">
                    <img src="./logo-dcore.jpg" alt="D'CORE Logo" class="stagger-child mx-auto mb-4 w-24 h-24 rounded-full shadow-lg" style="transition-delay: 100ms">
                </div>
                <h1 style="transition-delay: 200ms" class="stagger-child text-6xl md:text-8xl font-serif font-extrabold platinum-text">D'CORE</h1>
                <p style="transition-delay: 300ms" class="stagger-child text-xl md:text-3xl font-serif text-gray-700">Un Legado de Detalles del Corazón</p>
                <p style="transition-delay: 400ms" class="stagger-child mt-6 max-w-2xl mx-auto text-lg md:text-xl font-light">Donde cada regalo es una historia. Explora nuestras creaciones tejidas, talladas y bordadas, hechas con amor y autenticidad.</p>
                <a style="transition-delay: 500ms" href="#productos" class="stagger-child mt-10 inline-block btn-primary">Explorar la Colección</a>
            </div>
        </section>

        <!-- Countdown Section -->
        <section id="countdown" class="container mx-auto px-6 py-12 text-center fade-in-up">
            <h2 class="text-4xl md:text-5xl font-serif font-bold platinum-text text-red mb-6">¡Súper Oferta!</h2>
            <p class="text-lg mb-8 max-w-2xl mx-auto">No se pierda el descuento del 20% en toda la colección de madera. ¡El tiempo se acaba!</p>
            <div id="countdown-timer" class="countdown-container">
                <div class="countdown-item">
                    <span id="days" class="countdown-value platinum-text">00</span>
                    <span class="countdown-label">Días</span>
                </div>
                <div class="countdown-item">
                    <span id="hours" class="countdown-value platinum-text">00</span>
                    <span class="countdown-label">Horas</span>
                </div>
                <div class="countdown-item">
                    <span id="minutes" class="countdown-value platinum-text">00</span>
                    <span class="countdown-label">Minutos</span>
                </div>
                <div class="countdown-item">
                    <span id="seconds" class="countdown-value platinum-text">00</span>
                    <span class="countdown-label">Segundos</span>
                </div>
            </div>
        </section>
        
        <!-- Calendar Section -->
        <section id="gift-calendar" class="container mx-auto px-6 py-20 fade-in-up">
            <div class="in-view bg-green/20 rounded-3xl p-6 md:p-12">
                <h2 class="text-4xl md:text-5xl font-serif font-bold text-center text-green mb-6">Tu Calendario de Regalos</h2>
                <p class="text-center text-lg max-w-3xl mx-auto mb-10">
                    Marque sus fechas importantes y reciba recordatorios. Nunca olvide un cumpleaños o aniversario de nuevo.
                </p>
                <div class="flex flex-col md:flex-row md:space-x-8">
                    <div class="w-full md:w-1/2 mb-8 md:mb-0">
                        <div class="flex justify-between items-center mb-4">
                            <button id="prev-month-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
                            <h3 id="current-month-year" class="text-lg font-semibold"></h3>
                            <button id="next-month-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                        </div>
                        <div class="calendar-container text-gray-500 font-bold mb-2 text-sm">
                            <span>Dom</span><span>Lun</span><span>Mar</span><span>Mié</span><span>Jue</span><span>Vie</span><span>Sáb</span>
                        </div>
                        <div id="calendar-days" class="calendar-container flex-1"></div>
                    </div>
                    <div class="w-full md:w-1/2">
                        <div class="flex justify-between items-baseline mb-2">
                             <h4 class="font-bold text-lg">Fechas de este mes:</h4>
                             <h4 class="font-bold text-lg">Añadir una nueva fecha:</h4>
                        </div>
                        <div class="flex space-x-4">
                            <div class="w-1/2">
                                <ul id="month-events" class="text-sm text-gray-600 h-48 overflow-y-auto bg-white/50 rounded-lg p-2"></ul>
                            </div>
                            <div class="w-1/2 flex flex-col space-y-2">
                               <input type="text" id="event-name-input" class="rounded-lg p-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-orange text-black" placeholder="Nombre del evento">
                                <input type="date" id="event-date-input" class="rounded-lg p-2 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-orange text-black">
                                <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                                    <button id="add-event-btn" class="btn-primary w-full text-sm">Añadir</button>
                                    <button id="whatsapp-reminder-btn" class="btn-primary bg-green text-white w-full text-sm">Recordar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Our Story Section -->
        <section id="nosotros" class="container mx-auto px-6 py-20 fade-in-up">
            <div class="in-view">
                <h2 class="text-4xl md:text-5xl font-serif font-bold text-center mb-12 stagger-child" style="transition-delay: 0ms;">Nuestra Historia</h2>
                <div class="flex flex-col md:flex-row items-center md:space-x-12">
                    <div class="w-full md:flex-1 mb-8 md:mb-0 stagger-child" style="transition-delay: 100ms;">
                        <div class="carousel-container">
                             <div class="carousel-track" id="main-carousel-track"></div>
                             <button id="prev-btn" class="carousel-button prev"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button>
                             <button id="next-btn" class="carousel-button next"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" /></svg></button>
                        </div>
                    </div>
                    <div class="flex-1 stagger-child" style="transition-delay: 200ms;">
                        <p class="text-lg leading-relaxed mb-4">La historia de D'CORE no empezó en un bazar, sino en intercambios de nueve hermanos: Pepe, Alba, Marco, Paty, Lenin, Lupe, Kathy, Cubi y Marie. Crecieron en un hogar donde los regalos no se compraban, se creaban.</p>
                        <p class="text-lg leading-relaxed mb-4">Un amigo, conmovido por un obsequio, dijo: <span class="font-semibold italic text-red">“Su regalo tiene un valor que el dinero no puede comprar”</span>. Esa frase encendió una chispa y transformó una tradición familiar en una misión: compartir esa magia con el mundo.</p>
                        <p class="text-lg leading-relaxed">Así nació D'CORE, uniendo talentos en madera, pintura, bordado y tejido. Cada pieza es un fragmento de nuestra historia, un regalo que conecta corazones y honra las tradiciones familiares que valoran los lazos entre generaciones.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Product Gallery Section -->
        <section id="productos" class="container mx-auto px-6 py-20 bg-orange/20 rounded-3xl my-12 fade-in-up">
            <h2 class="text-4xl md:text-5xl font-serif font-bold text-center mb-6">Nuestros Productos</h2>
            <p class="text-center text-lg max-w-3xl mx-auto mb-10">
                Además de nuestras colecciones, ofrecemos la posibilidad de crear <strong>modelos personalizados de cualquier personaje o serie</strong>. ¡Haga su idea realidad!
            </p>
            <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-8"></div>
        </section>

        <!-- Promotion Section -->
        <section id="promociones" class="container mx-auto px-6 py-20 fade-in-up">
            <div class="in-view flex flex-col md:flex-row items-center gap-12 bg-red/10 rounded-3xl p-8 md:p-12">
                <div class="stagger-child flex-1 w-full" style="transition-delay: 100ms;">
                    <img src="./IMG-20250830-WA0046.jpg" alt="Promoción especial" class="w-full h-auto object-cover rounded-2xl shadow-xl transform transition-transform duration-500 hover:scale-105">
                </div>
                <div class="stagger-child flex-1 text-center md:text-left" style="transition-delay: 0ms;">
                    <h2 class="text-4xl md:text-5xl font-serif font-bold text-red mb-4">Promoción Exclusiva</h2>
                    <p class="text-lg text-gray-600 mb-6">
                        ¡El arte llama al arte! Al inscribirte en cualquiera de nuestros cursos, te llevas de regalo un <strong>llavero de madera tallada</strong> de nuestra colección. Una pieza única para que lleves la inspiración contigo.
                    </p>
                    <a href="#cursos" class="btn-primary bg-red text-white border-red hover:bg-transparent hover:text-red">Ver Cursos</a>
                </div>
            </div>
        </section>
        
        <!-- Courses Section -->
        <section id="cursos" class="container mx-auto px-6 py-20 fade-in-up">
            <h2 class="text-4xl md:text-5xl font-serif font-bold text-center text-green mb-6">Clases y Cursos</h2>
            <p class="text-center text-lg max-w-3xl mx-auto mb-10">
                ¡No deje que la tradición se pierda! Aprenda con nuestros cursos personalizados. Ideales para un regalo único o para compartir con su pareja de una manera terapéutica y de conexión.
            </p>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Course 1 -->
                <div class="product-card p-6 text-center flex flex-col justify-between">
                    <div>
                        <img src="./IMG-20250830-WA0045.jpg" alt="Curso de bordado de muñecos" class="w-full h-48 object-cover rounded-xl mb-4">
                        <h3 class="text-xl font-bold font-serif text-green mb-2">Taller: Bordado de Muñecos</h3>
                        <p class="text-gray-600 mb-4 text-sm">Aprenda las técnicas fundamentales del bordado para crear personajes adorables. Incluye materiales y guía paso a paso.</p>
                    </div>
                    <div class="flex flex-col sm:flex-row items-center justify-between mt-auto pt-4 gap-2">
                        <span class="text-xl font-bold text-green">$55.00</span>
                        <a href="https://wa.me/593987786632?text=Hola%20D'CORE,%20estoy%20interesado%20en%20el%20Taller%20Inicial%20de%20Bordado%20de%20Muñecos." target="_blank" class="btn-primary text-sm w-full sm:w-auto">Inscribirse</a>
                    </div>
                </div>
                <!-- Course 2 -->
                <div class="product-card p-6 text-center flex flex-col justify-between">
                    <div>
                        <img src="./IMG-20250830-WA0046.jpg" alt="Taller creativo para parejas" class="w-full h-48 object-cover rounded-xl mb-4">
                        <h3 class="text-xl font-bold font-serif text-green mb-2">Bordado Creativo en Pareja</h3>
                        <p class="text-gray-600 mb-4 text-sm">Un plan único para crear juntos una obra de arte bordada con significado personal. Un espacio para conectar y divertirse.</p>
                    </div>
                    <div class="flex flex-col sm:flex-row items-center justify-between mt-auto pt-4 gap-2">
                        <span class="text-xl font-bold text-green">$90.00</span>
                        <a href="https://wa.me/593987786632?text=Hola%20D'CORE,%20estoy%20interesado%20en%20el%20Taller%20de%20Bordado%20Creativo%20en%20Pareja." target="_blank" class="btn-primary text-sm w-full sm:w-auto">Inscribirse</a>
                    </div>
                </div>
                <!-- Course 3 -->
                <div class="product-card p-6 text-center flex flex-col justify-between">
                    <div>
                        <img src="./IMG-20250830-WA0034.jpg" alt="Taller de tejeduría en madera 1:1" class="w-full h-48 object-cover rounded-xl mb-4">
                        <h3 class="text-xl font-bold font-serif text-green mb-2">Tejeduría en Madera (1 a 1)</h3>
                        <p class="text-gray-600 mb-4 text-sm">Sesión personalizada para aprender a tejer en madera, creando un regalo o una pieza de decoración a su gusto.</p>
                    </div>
                    <div class="flex flex-col sm:flex-row items-center justify-between mt-auto pt-4 gap-2">
                        <span class="text-xl font-bold text-green">$75.00</span>
                        <a href="https://wa.me/593987786632?text=Hola%20D'CORE,%20estoy%20interesado%20en%20el%20Taller%20de%20Tejeduría%20en%20Madera%20(1%20a%201)." target="_blank" class="btn-primary text-sm w-full sm:w-auto">Inscribirse</a>
                    </div>
                </div>
                <!-- Course 4 -->
                <div class="product-card p-6 text-center flex flex-col justify-between">
                    <div>
                        <img src="./IMG-20250830-WA0022.jpg" alt="Taller de diseño en madera" class="w-full h-48 object-cover rounded-xl mb-4">
                        <h3 class="text-xl font-bold font-serif text-green mb-2">Diseño y Corte en Madera</h3>
                        <p class="text-gray-600 mb-4 text-sm">Curso avanzado para cortar y diseñar piezas, ideal para crear objetos más grandes como pequeños muebles.</p>
                    </div>
                    <div class="flex flex-col sm:flex-row items-center justify-between mt-auto pt-4 gap-2">
                        <span class="text-xl font-bold text-green">$120.00</span>
                        <a href="https://wa.me/593987786632?text=Hola%20D'CORE,%20estoy%20interesado%20en%20el%20Taller%20de%20Diseño%20y%20Corte%20en%20Madera." target="_blank" class="btn-primary text-sm w-full sm:w-auto">Inscribirse</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Advisory Section -->
        <section id="asesorias" class="container mx-auto px-6 py-20 fade-in-up">
            <div class="in-view flex flex-col md:flex-row-reverse items-center gap-12 bg-green/20 rounded-3xl p-8 md:p-12">
                <div class="stagger-child flex-1 text-center md:text-left" style="transition-delay: 0ms;">
                    <h2 class="text-4xl md:text-5xl font-serif font-bold text-green mb-4">Asesorías Personalizadas</h2>
                    <p class="text-lg text-gray-600 mb-6">
                        ¿Tiene una idea en mente pero no sabe por dónde empezar? Le ayudamos a materializarla. Desde el concepto, elección de materiales, hasta la técnica, le guiamos en cada paso.
                    </p>
                    <a href="https://wa.me/593987786632?text=Hola%20D'CORE,%20quisiera%20una%20asesoría%20personalizada." target="_blank" class="btn-primary bg-green text-white border-green hover:bg-transparent hover:text-green text-base">Contratar ($30/hora)</a>
                </div>
                <div class="stagger-child flex-1 w-full" style="transition-delay: 100ms;">
                    <img src="./IMG-20250830-WA0035.jpg" alt="Asesoría personalizada" class="w-full h-auto object-cover rounded-2xl shadow-xl transform transition-transform duration-500 hover:scale-105">
                </div>
            </div>
        </section>

        <!-- Custom Furniture Section -->
        <section id="muebles" class="container mx-auto px-6 py-20 fade-in-up">
            <div class="in-view flex flex-col md:flex-row items-center gap-12 bg-gray-800 text-white rounded-3xl p-8 md:p-12">
                <div class="stagger-child flex-1 w-full" style="transition-delay: 100ms;">
                    <img src="https://images.pexels.com/photos/1125137/pexels-photo-1125137.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="" class="w-full h-auto object-cover rounded-2xl shadow-xl transform transition-transform duration-500 hover:scale-105">
                </div>
                <div class="stagger-child flex-1 text-center md:text-left" style="transition-delay: 0ms;">
                    <h2 class="text-4xl md:text-5xl font-serif font-bold text-yellow-50 mb-4">Servicio Premium: Muebles a Medida</h2>
                    <p class="text-lg text-gray-300 mb-6">
                        Transformamos tus espacios con muebles que cuentan tu historia. Nuestro servicio premium ofrece diseño y fabricación de piezas únicas y personalizadas en madera, creadas artesanalmente para encajar a la perfección con tu estilo.
                    </p>
                    <a href="https://wa.me/593987786632?text=Hola%20D'CORE,%20estoy%20interesado%20en%20el%20servicio%20de%20muebles%20a%20medida." target="_blank" class="btn-primary bg-yellow-50 text-gray-800 border-yellow-50 hover:bg-transparent hover:text-yellow-50">Solicitar Cotización</a>
                </div>
            </section>
        
        <!-- Delivery Banner -->
        <section class="container mx-auto px-6 pt-12 pb-4 fade-in-up">
             <div class="bg-red text-white text-center p-4 rounded-2xl shadow-lg flex items-center justify-center space-x-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" /><path stroke-linecap="round" stroke-linejoin="round" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0" /></svg>
                <p class="font-semibold tracking-wider text-lg">ENTREGAS EN TODO EL ECUADOR</p>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonios" class="container mx-auto px-6 py-20 fade-in-up">
            <h2 class="text-4xl md:text-5xl font-serif font-bold text-center text-orange mb-12">Lo que dicen nuestros clientes</h2>
            <div class="relative">
                <div id="testimonial-slider-wrapper">
                    <div id="testimonial-track">
                        <!-- Testimonial Card 1 -->
                        <div class="testimonial-card">
                            <div class="product-card h-full p-6 md:p-8 text-left flex flex-col">
                                <div class="flex items-center mb-4 text-yellow-400">
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                </div>
                                <p class="text-gray-600 italic mb-4 flex-grow">"¡El muñeco de lana es adorable! La calidad es increíble y se nota el cariño en cada puntada. Fue el regalo perfecto."</p>
                                <p class="font-bold text-right text-orange mt-auto">- Sofía M. <span class="font-light text-gray-500">de Guayaquil</span></p>
                            </div>
                        </div>
                        <!-- Testimonial Card 2 -->
                        <div class="testimonial-card">
                           <div class="product-card h-full p-6 md:p-8 text-left flex flex-col">
                                <div class="flex items-center mb-4 text-yellow-400">
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                </div>
                                <p class="text-gray-600 italic mb-4 flex-grow">"El detalle en madera que compré superó mis expectativas. ¡Calidad y arte puro! Se nota el amor en cada pieza."</p>
                                <p class="font-bold text-right text-orange mt-auto">- Carlos G. <span class="font-light text-gray-500">de Quito</span></p>
                            </div>
                        </div>
                        <!-- Testimonial Card 3 -->
                        <div class="testimonial-card">
                           <div class="product-card h-full p-6 md:p-8 text-left flex flex-col">
                                <div class="flex items-center mb-4 text-yellow-400">
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                </div>
                                <p class="text-gray-600 italic mb-4 flex-grow">"El calendario de regalos es una maravilla. Programé un obsequio para mi aniversario y llegó justo a tiempo. ¡Totalmente recomendado!"</p>
                                <p class="font-bold text-right text-orange mt-auto">- David R. <span class="font-light text-gray-500">de Cuenca</span></p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Mobile Navigation Buttons -->
                <button id="testimonial-prev-btn" class="carousel-button prev md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button>
                <button id="testimonial-next-btn" class="carousel-button next md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" /></svg></button>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-red text-white py-12 mt-12">
        <div class="container mx-auto px-6 text-center">
            <img src="./logo-dcore.jpg" alt="D'CORE Logo" class="mx-auto mb-6 w-24 h-24 rounded-full border-4 border-white">
            <h3 class="text-3xl font-serif font-bold">D'CORE</h3>
            <p class="mt-2 text-lg text-white">Un Legado de Detalles del Corazón</p>
            <div class="flex justify-center space-x-6 my-6">
                 <a href="https://wa.me/593987786632" target="_blank" class="text-white hover:text-gray-200 transition-transform transform hover:scale-110"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99 0-3.903-.52-5.588-1.48L.057 24zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.886-.001 2.267.655 4.398 1.803 6.12l-1.34 4.885 5.023-1.311z"/></svg></a>
                 <a href="https://www.instagram.com/_hannah.yanez/" target="_blank" class="text-white hover:text-gray-200 transition-transform transform hover:scale-110"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664-4.771 4.919-4.919C8.416 2.175 8.796 2.163 12 2.163m0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.358-.2 6.78-2.618 6.98-6.98.059-1.281.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.2-4.358-2.618-6.78-6.98-6.98C8.333 0 7.927.014 4.667.072H12zM12 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44 1.441-.645 1.441-1.44-.645-1.44-1.441-1.44z"/></svg></a>
            </div>
            <div class="mt-8 pt-8 border-t border-red/40">
                <p class="text-sm text-red/60">&copy; 2025 D'CORE. Todos los derechos reservados.</p>
                <p class="text-sm text-red/60 mt-4 tracking-wider">Diseñado por <a href="https://www.goatify.app/web" target="_blank" class="font-semibold underline hover:text-white">Goatify IA</a> en colaboración con Hannah Yánez, cofundadora de la marca.</p>
            </div>
        </div>
    </footer>

    <div id="toast" class="fixed bottom-8 left-1/2 -translate-x-1/2 bg-red text-white px-6 py-3 rounded-full shadow-lg transition-transform duration-500 transform translate-y-20 opacity-0">
        Producto añadido al carrito.
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Local storage for calendar events
            function getLocalEvents() {
                try {
                    const events = JSON.parse(localStorage.getItem('userEvents')) || [];
                    return events;
                } catch (e) { console.error("Error parsing userEvents from localStorage:", e); return []; }
            }

            function saveLocalEvents(events) {
                try {
                    localStorage.setItem('userEvents', JSON.stringify(events));
                } catch (e) { console.error("Error saving userEvents to localStorage:", e); }
            }

            // Smooth scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
                });
            });
            
            // Header scroll effect
            const header = document.querySelector('header');
            window.addEventListener('scroll', () => {
                header.classList.toggle('scrolled', window.scrollY > 20);
            });

            // Intersection Observer for fade-in animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('in-view');
                        entry.target.querySelectorAll('.stagger-child').forEach((child, i) => {
                             child.style.transitionDelay = `${i * 120}ms`;
                        });
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.15 });
            document.querySelectorAll('.fade-in-up').forEach(element => { observer.observe(element); });
            
            // Product data
            const products = [
                 { name: "Muñeco de Lana", price: 25.00, image: "./IMG-20250830-WA0045.jpg" },
                { name: "Llavero Tallado", price: 15.00, image: "./IMG-20250830-WA0029.jpg", discount: 15 },
                { name: "Camiseta Bordada", price: 40.00, image: "./IMG-20250830-WA0046.jpg" },
                { name: "Caja de Madera", price: 30.00, image: "./IMG-20250830-WA0030.jpg", discount: 20 },
                { name: "Figura Tejida", price: 20.00, image: "./IMG-20250830-WA0047.jpg" },
                { name: "Detalle Tallado", price: 18.00, image: "./IMG-20250830-WA0027.jpg", discount: 20 },
                { name: "Muñeco de Lana (Diseño 2)", price: 25.00, image: "./IMG-20250830-WA0026.jpg" },
                { name: "Llavero Tallado (Diseño 2)", price: 15.00, image: "./IMG-20250830-WA0023.jpg", discount: 20 },
                { name: "Camiseta Bordada (Diseño 2)", price: 40.00, image: "./IMG-20250830-WA0024.jpg" },
                { name: "Figura de Madera", price: 35.00, image: "./IMG-20250830-WA0020.jpg", discount: 20 },
                { name: "Muñeco Personalizado", price: 50.00, image: "./IMG-20250830-WA0021.jpg" },
                { name: "Caja de Madera (Diseño 2)", price: 32.00, image: "./IMG-20250830-WA0022.jpg", discount: 20 },
                { name: "Bolso de Tela", price: 28.00, image: "./IMG-20250830-WA0042.jpg" },
                { name: "Bolso de Tela (Diseño 2)", price: 28.00, image: "./IMG-20250830-WA0043.jpg" },
                { name: "Marco de Madera", price: 22.00, image: "./IMG-20250830-WA0044.jpg", discount: 20 },
                { name: "Llavero de Metal", price: 10.00, image: "./IMG-20250830-WA0039.jpg" },
                { name: "Muñeca de Lana", price: 25.00, image: "./IMG-20250830-WA0040.jpg" },
                { name: "Tarro de Cerámica", price: 15.00, image: "./IMG-20250830-WA0041.jpg" },
                { name: "Alcancía de Madera", price: 20.00, image: "./IMG-20250830-WA0037.jpg", discount: 20 },
                { name: "Reloj de Pared", price: 55.00, image: "./IMG-20250830-WA0038.jpg", discount: 20 },
                { name: "Cuadro de Madera", price: 45.00, image: "./IMG-20250830-WA0036.jpg", discount: 20 },
                { name: "Collar de Madera", price: 12.00, image: "./IMG-20250830-WA0033.jpg", discount: 20 },
                { name: "Pulsera de Madera", price: 8.00, image: "./IMG-20250830-WA0034.jpg", discount: 20 },
                { name: "Bordado Personalizado", price: 50.00, image: "./IMG-20250830-WA0035.jpg" },
                { name: "Cenicero de Madera", price: 20.00, image: "./IMG-20250830-WA0031.jpg", discount: 20 },
                { name: "Vasos de Madera", price: 15.00, image: "./IMG-20250830-WA0032.jpg", discount: 20 },
                { name: "Llavero de Peluche", price: 10.00, image: "./IMG-20250830-WA0028.jpg" },
            ];

            const productGrid = document.getElementById('product-grid');
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.classList.add('product-card', 'flex', 'flex-col', 'text-center');

                let priceHTML = `<span class="text-2xl font-bold text-red mb-4">$${product.price.toFixed(2)}</span>`;
                let finalPrice = product.price;

                if (product.discount) {
                    finalPrice = product.price * (1 - product.discount / 100);
                    priceHTML = `
                        <div class="flex items-center justify-center space-x-2 mb-4">
                            <span class="text-xl font-bold text-red">$${finalPrice.toFixed(2)}</span>
                            <span class="text-lg text-gray-400 line-through">$${product.price.toFixed(2)}</span>
                        </div>`;
                }

                productCard.innerHTML = `
                    ${product.discount ? `<div class="sale-badge">-${product.discount}%</div>` : ''}
                    <div class="overflow-hidden rounded-t-2xl"><img src="${product.image}" alt="${product.name}" class="w-full h-48 sm:h-64 object-cover"></div>
                    <div class="p-4 md:p-6 flex-1 flex flex-col">
                        <h3 class="text-lg md:text-xl font-semibold mb-2 flex-grow">${product.name}</h3>
                        ${priceHTML}
                        <button class="add-to-cart-btn btn-primary w-full mt-auto text-sm">Añadir al Carrito</button>
                    </div>`;
                productGrid.appendChild(productCard);
            });

            // Shopping Cart Logic
            let cart = [];
            const cartBtn = document.getElementById('cart-btn');
            const closeCartBtn = document.getElementById('close-cart-btn');
            const cartModal = document.getElementById('cart-modal');
            const cartOverlay = document.getElementById('cart-overlay');
            const cartItemsContainer = document.getElementById('cart-items');
            const cartTotalSpan = document.getElementById('cart-total');
            const cartCountSpan = document.getElementById('cart-count');
            const whatsappBtn = document.getElementById('whatsapp-btn');
            const toast = document.getElementById('toast');

            function openCart() { cartModal.classList.add('open'); cartOverlay.classList.add('open'); }
            function closeCart() { cartModal.classList.remove('open'); cartOverlay.classList.remove('open'); }

            cartBtn.addEventListener('click', openCart);
            closeCartBtn.addEventListener('click', closeCart);
            cartOverlay.addEventListener('click', closeCart);

            document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const name = e.target.closest('.product-card').querySelector('h3').textContent;
                    const productData = products.find(p => p.name === name);
                    const price = productData.discount ? productData.price * (1 - productData.discount / 100) : productData.price;
                    const image = e.target.closest('.product-card').querySelector('img').src;
                    
                    const existingItem = cart.find(item => item.name === name);
                    if (existingItem) {
                        existingItem.quantity++;
                    } else {
                        cart.push({ name, price: parseFloat(price), image, quantity: 1 });
                    }
                    updateCart();
                    showToast(`Se añadió ${name} al carrito.`);
                });
            });

            cartItemsContainer.addEventListener('click', (e) => {
                const target = e.target.closest('button');
                if (!target) return;
                
                const name = target.closest('.flex-1, .text-right').dataset.name;
                const action = target.dataset.action;
                const itemInCart = cart.find(item => item.name === name);
                if (!itemInCart) return;

                if (action === 'increase') { itemInCart.quantity++; } 
                else if (action === 'decrease') {
                    itemInCart.quantity--;
                    if (itemInCart.quantity === 0) cart = cart.filter(item => item.name !== name);
                } else if (action === 'remove') {
                    cart = cart.filter(item => item.name !== name);
                }
                updateCart();
            });

            function updateCart() {
                cartItemsContainer.innerHTML = '';
                let total = 0;
                let totalItems = 0;
                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = '<p class="text-center text-gray-500">El carrito está vacío.</p>';
                    cartCountSpan.classList.add('hidden');
                } else {
                    cart.forEach(item => {
                        total += item.price * item.quantity;
                        totalItems += item.quantity;
                        const itemElement = document.createElement('div');
                        itemElement.classList.add('flex', 'items-center', 'space-x-2', 'p-2', 'bg-gray-50', 'rounded-lg');
                        itemElement.innerHTML = `
                            <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded-lg">
                            <div class="flex-1" data-name="${item.name}">
                                <h4 class="font-bold text-sm">${item.name}</h4>
                                <div class="flex items-center space-x-2 mt-1">
                                    <button data-action="decrease" class="quantity-btn w-6 h-6 bg-gray-200 rounded-full font-bold">-</button>
                                    <span>${item.quantity}</span>
                                    <button data-action="increase" class="quantity-btn w-6 h-6 bg-gray-200 rounded-full font-bold">+</button>
                                </div>
                            </div>
                            <div class="text-right" data-name="${item.name}">
                               <span class="font-semibold text-sm">$${(item.price * item.quantity).toFixed(2)}</span>
                               <button data-action="remove" class="remove-btn text-red text-xs mt-1 hover:underline">Eliminar</button>
                            </div>`;
                        cartItemsContainer.appendChild(itemElement);
                    });
                    cartCountSpan.classList.remove('hidden');
                    cartCountSpan.textContent = totalItems;
                }
                cartTotalSpan.textContent = `$${total.toFixed(2)}`;
            }

            whatsappBtn.addEventListener('click', () => {
                if (cart.length === 0) {
                    showToast("Su carrito está vacío.");
                    return;
                }
                let message = "¡Hola D'CORE! Me gustaría comprar los siguientes productos:\n\n";
                cart.forEach(item => {
                    message += `* ${item.quantity} x ${item.name} ($${(item.price * item.quantity).toFixed(2)})\n`;
                });
                message += `\nTotal: $${cartTotalSpan.textContent.replace('$', '')}`;
                const whatsappUrl = `https://wa.me/593987786632?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
            });
            
            function showToast(message) {
                toast.textContent = message;
                toast.classList.remove('opacity-0', 'translate-y-20');
                setTimeout(() => { toast.classList.add('opacity-0', 'translate-y-20'); }, 3000);
            }

            // Chatbot Logic
            const chatbotBtnTrigger = document.getElementById('chatbot-btn-trigger');
            const closeChatbotBtn = document.getElementById('close-chatbot-btn');
            const chatbotModal = document.getElementById('chatbot-modal');
            const chatbotOverlay = document.getElementById('chatbot-overlay');
            const chatInput = document.getElementById('chat-input');
            const sendBtn = document.getElementById('send-btn');
            const chatWindow = document.getElementById('chat-window');
            const chatOptionsContainer = document.getElementById('chat-options');

            let chatbotState = { mode: 'normal', data: null };

            const chatbotConversations = {
                'saludo': {
                    text: "¡Hola! Soy tu asistente personal de D'CORE. Estoy aquí para ayudarte a encontrar el regalo perfecto y no olvidar ninguna fecha importante. ¿Qué te gustaría hacer?",
                    options: ['Ver productos', 'Info de Cursos', 'Agendar un recordatorio', 'Sobre D\'CORE']
                },
                'ver productos': {
                    text: "¡Excelente! Tenemos tesoros en lana, madera y bordado. También hacemos diseños personalizados. ¿Qué te llama la atención?",
                    options: ['Ver colección', 'Regalos personalizados', 'Promociones', 'Volver']
                },
                'ver colección': {
                    text: "Puedes explorar toda nuestra magia en la sección de 'Productos'. Si ves algo que te gusta, ¡dime el nombre y te doy el precio!",
                    action: () => document.getElementById('productos').scrollIntoView(),
                    options: ['Volver']
                },
                'regalos personalizados': {
                    text: "¡Hacemos tus ideas realidad! Creamos modelos de cualquier personaje o serie. Para una cotización, contáctanos por WhatsApp y cuéntanos tu idea.",
                    options: ['Contactar por WhatsApp', 'Volver']
                },
                'promociones': {
                    text: "¡Claro que sí! Actualmente, si te inscribes en cualquier curso, te regalamos un llavero de madera tallada. Además, tenemos 20% de descuento en la colección de madera. ¡Aprovecha!",
                     action: () => document.getElementById('promociones').scrollIntoView(),
                    options: ['Ver cursos', 'Ver productos en oferta', 'Volver']
                },
                'info de cursos': {
                    text: "Nuestros talleres son una experiencia única. Perfectos para aprender, regalar o conectar. ¿Cuál te interesa más?",
                    action: () => document.getElementById('cursos').scrollIntoView(),
                    options: ['Bordado de Muñecos ($55)', 'Bordado en Pareja ($90)', 'Tejeduría en Madera ($75)', 'Diseño en Madera ($120)', 'Volver']
                },
                'asesorías': {
                    text: "Con nuestras asesorías de $30/hora, te guiamos paso a paso para que tu proyecto sea un éxito. ¿Listo para crear?",
                    action: () => document.getElementById('asesorias').scrollIntoView(),
                    options: ['Contactar por WhatsApp', 'Volver']
                },
                'sobre d\'core': {
                    text: "D'CORE es el sueño de 9 hermanos que transformaron una tradición familiar en un taller de regalos con alma. Cada pieza lleva un trozo de nuestra historia.",
                     action: () => document.getElementById('nosotros').scrollIntoView(),
                    options: ['Volver']
                },
                'agendar un recordatorio': {
                    text: "¡Perfecto! Nunca más olvidarás una fecha especial. Por favor, dime el nombre del evento o recordatorio (ej: Aniversario con Ana).",
                    action: () => { chatbotState.mode = 'awaiting_event_name'; chatbotState.data = {}; }
                },
                 'contactar por whatsapp': {
                    text: "¡Perfecto! Te redirigiré a WhatsApp para que hables con un miembro de nuestro equipo.",
                    action: () => window.open(`https://wa.me/593987786632?text=${encodeURIComponent("Hola D'CORE, ¡necesito su ayuda!")}`, '_blank'),
                    options: ['Volver']
                },
                'default': {
                    text: "No te entendí muy bien. ¿Podrías intentar con una de estas opciones? Estoy aquí para ayudarte.",
                    options: ['Ver productos', 'Info de Cursos', 'Agendar un recordatorio']
                }
            };
            
            function displayChatOptions(options) {
                chatOptionsContainer.innerHTML = '';
                if (options) {
                    options.forEach(option => {
                        const button = document.createElement('button');
                        button.classList.add('chat-option-btn');
                        button.textContent = option;
                        button.addEventListener('click', () => handleChatInteraction(option));
                        chatOptionsContainer.appendChild(button);
                    });
                }
            }

            function handleChatInteraction(message) {
                addMessageToChat(message, true);
                const lowerCaseMessage = message.toLowerCase().trim().split('(')[0].trim();
                
                // State-based conversation for calendar
                if (chatbotState.mode === 'awaiting_event_name') {
                    chatbotState.data.name = message.trim();
                    chatbotState.mode = 'awaiting_event_date';
                    addMessageToChat("¡Genial! Ahora dime la fecha. Usa el formato AAAA-MM-DD, por favor.", false);
                    displayChatOptions([]);
                    return;
                }
                if (chatbotState.mode === 'awaiting_event_date') {
                    const dateRegex = /^\d{4}-\d{2}-\d{2}$/;
                    if (dateRegex.test(message.trim())) {
                        chatbotState.data.date = message.trim();
                        addEvent(chatbotState.data.name, chatbotState.data.date);
                        addMessageToChat(`¡Listo! He agendado "${chatbotState.data.name}" para el ${chatbotState.data.date}. Te aparecerá marcado en el calendario. ¿Algo más?`, false);
                        chatbotState = { mode: 'normal', data: null }; // Reset state
                        displayChatOptions(chatbotConversations.saludo.options);
                    } else {
                        addMessageToChat("La fecha no parece correcta. Por favor, asegúrate de usar el formato AAAA-MM-DD (ej: 2025-12-25).", false);
                    }
                    return;
                }

                // Normal conversation flow
                let responseKey = 'default';
                if (chatbotConversations[lowerCaseMessage]) {
                    responseKey = lowerCaseMessage;
                } else if (lowerCaseMessage.includes('producto') || lowerCaseMessage.includes('colección')) {
                    responseKey = 'ver productos';
                } else if (lowerCaseMessage.includes('curso')) {
                    responseKey = 'info de cursos';
                } else if (lowerCaseMessage.includes('volver')) {
                    responseKey = 'saludo';
                }

                // Check for product match
                const foundProduct = products.find(p => p.name.toLowerCase().includes(lowerCaseMessage));
                if (foundProduct) {
                    const priceInfo = foundProduct.discount
                        ? `Está en oferta por $${(foundProduct.price * (1 - foundProduct.discount / 100)).toFixed(2)} (precio original: $${foundProduct.price.toFixed(2)}).`
                        : `Su precio es $${foundProduct.price.toFixed(2)}.`;
                    const responseText = `¡Excelente elección! El producto "${foundProduct.name}" es una maravilla. ${priceInfo} ¿Quieres que lo añada al carrito?`;
                    setTimeout(() => {
                        addMessageToChat(responseText, false);
                        displayChatOptions([`Añadir ${foundProduct.name}`, 'Volver']);
                    }, 500);
                    return;
                }
                
                // Check for "Añadir" action
                if(lowerCaseMessage.startsWith('añadir ')){
                    const productName = message.substring(7);
                    const productData = products.find(p => p.name === productName);
                    if (productData) {
                        const price = productData.discount ? productData.price * (1 - productData.discount / 100) : productData.price;
                        const existingItem = cart.find(item => item.name === productName);
                        if (existingItem) { existingItem.quantity++; } 
                        else { cart.push({ name: productName, price, image: productData.image, quantity: 1 }); }
                        updateCart();
                        setTimeout(() => {
                            addMessageToChat(`¡Listo! "${productName}" fue añadido a tu carrito. ¿Deseas algo más?`, false);
                            displayChatOptions(chatbotConversations['saludo'].options);
                        }, 500);
                        return;
                    }
                }

                const conversation = chatbotConversations[responseKey];
                setTimeout(() => {
                    addMessageToChat(conversation.text, false);
                    displayChatOptions(conversation.options);
                    if (conversation.action) conversation.action();
                }, 500);

                chatInput.value = '';
            }

            function addMessageToChat(message, isUser) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message', isUser ? 'user-message' : 'bot-message');
                messageDiv.textContent = message;
                chatWindow.appendChild(messageDiv);
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }

            function sendMessage() {
                const userMessage = chatInput.value.trim();
                if (userMessage === '') return;
                handleChatInteraction(userMessage);
                chatInput.value = '';
            }

            function openChatbot() {
                chatbotModal.classList.add('open');
                chatbotOverlay.classList.add('open');
                chatbotBtnTrigger.classList.add('hidden');
            }
            function closeChatbot() {
                chatbotModal.classList.remove('open');
                chatbotOverlay.classList.remove('open');
                chatbotBtnTrigger.classList.remove('hidden');
            }

            chatbotBtnTrigger.addEventListener('click', () => { 
                chatWindow.innerHTML = '';
                addMessageToChat(chatbotConversations['saludo'].text, false);
                displayChatOptions(chatbotConversations['saludo'].options);
                openChatbot();
            });
            closeChatbotBtn.addEventListener('click', closeChatbot);
            chatbotOverlay.addEventListener('click', closeChatbot);
            sendBtn.addEventListener('click', sendMessage);
            chatInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') sendMessage(); });
            
            // Open chatbot by default on first visit
            setTimeout(() => {
                if (!chatbotModal.classList.contains('open')) {
                    addMessageToChat(chatbotConversations['saludo'].text, false);
                    displayChatOptions(chatbotConversations['saludo'].options);
                    openChatbot();
                }
            }, 1500);
            
            // Carousel Logic
            const mainCarouselTrack = document.getElementById('main-carousel-track');
            const storyImages = ["./IMG-20250830-WA0034.jpg", "./IMG-20250830-WA0035.jpg", "./IMG-20250830-WA0046.jpg", "./IMG-20250830-WA0045.jpg", "./IMG-20250830-WA0030.jpg"];
            storyImages.forEach(imageUrl => {
                const slide = document.createElement('div');
                slide.className = 'carousel-slide';
                slide.style.backgroundImage = `url('${imageUrl}')`;
                mainCarouselTrack.appendChild(slide);
            });
            let mainCurrentSlide = 0;
            const mainSlides = mainCarouselTrack.children;
            const mainPrevBtn = document.getElementById('prev-btn');
            const mainNextBtn = document.getElementById('next-btn');

            function updateMainCarousel() {
                if (mainSlides.length > 0) {
                   mainCarouselTrack.style.transform = `translateX(-${mainCurrentSlide * 100}%)`;
                }
            }
            function nextMainSlide() { mainCurrentSlide = (mainCurrentSlide + 1) % mainSlides.length; updateMainCarousel(); }
            function prevMainSlide() { mainCurrentSlide = (mainCurrentSlide - 1 + mainSlides.length) % mainSlides.length; updateMainCarousel(); }
            mainNextBtn.addEventListener('click', nextMainSlide);
            mainPrevBtn.addEventListener('click', prevMainSlide);
            setInterval(nextMainSlide, 3000);

            const testimonialTrack = document.getElementById('testimonial-track');
            const testimonialSlides = Array.from(testimonialTrack.children);
            const testimonialPrevBtn = document.getElementById('testimonial-prev-btn');
            const testimonialNextBtn = document.getElementById('testimonial-next-btn');
            let currentTestimonialSlide = 0;
            function updateTestimonialCarousel() {
                if (window.innerWidth < 768) {
                    testimonialTrack.style.transform = `translateX(-${currentTestimonialSlide * 100}%)`;
                } else {
                    testimonialTrack.style.transform = 'none';
                }
            }
            function nextTestimonialSlide() { currentTestimonialSlide = (currentTestimonialSlide + 1) % testimonialSlides.length; updateTestimonialCarousel(); }
            function prevTestimonialSlide() { currentTestimonialSlide = (currentTestimonialSlide - 1 + testimonialSlides.length) % testimonialSlides.length; updateTestimonialCarousel(); }
            testimonialNextBtn.addEventListener('click', nextTestimonialSlide);
            testimonialPrevBtn.addEventListener('click', prevTestimonialSlide);
            window.addEventListener('resize', updateTestimonialCarousel);

            // Countdown timer logic
            const countdownEnd = new Date(Date.now() + 1000 * 60 * 60 * 24 * 7); // 7 días
            const daysSpan = document.getElementById('days');
            const hoursSpan = document.getElementById('hours');
            const minutesSpan = document.getElementById('minutes');
            const secondsSpan = document.getElementById('seconds');
            const countdownInterval = setInterval(() => {
                const now = new Date();
                const diff = countdownEnd - now;
                if (diff < 0) {
                    clearInterval(countdownInterval);
                    daysSpan.textContent = hoursSpan.textContent = minutesSpan.textContent = secondsSpan.textContent = '00';
                    return;
                }
                daysSpan.textContent = String(Math.floor(diff / (1000 * 60 * 60 * 24))).padStart(2, '0');
                hoursSpan.textContent = String(Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).padStart(2, '0');
                minutesSpan.textContent = String(Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))).padStart(2, '0');
                secondsSpan.textContent = String(Math.floor((diff % (1000 * 60)) / 1000)).padStart(2, '0');
            }, 1000);

            // Calendar Logic
            const currentMonthYearHeader = document.getElementById('current-month-year');
            const calendarDaysContainer = document.getElementById('calendar-days');
            const prevMonthBtn = document.getElementById('prev-month-btn');
            const nextMonthBtn = document.getElementById('next-month-btn');
            const addEventBtn = document.getElementById('add-event-btn');
            const eventNameInput = document.getElementById('event-name-input');
            const eventDateInput = document.getElementById('event-date-input');
            const monthEventsList = document.getElementById('month-events');
            const whatsappReminderBtn = document.getElementById('whatsapp-reminder-btn');
            
            let currentMonth = new Date();
            let userEvents = getLocalEvents();

            const specialDates = {
                1: [ { day: 1, name: "Año Nuevo" }, { day: 6, name: "Día de Reyes" }, { day: 15, name: "Día del Artesano Ecuatoriano" }],
                2: [ { day: 14, name: "Día de San Valentín" }, { day: 27, name: "Día del Civismo (Ecuador)" } ],
                3: [ { day: 8, name: "Día de la Mujer" }, { day: 19, name: "Día del Padre (España/Italia)" }, { day: 20, name: "Equinoccio de Primavera" } ],
                4: [ { day: 1, name: "Día del Niño (varios países)" }, { day: 22, name: "Día de la Tierra" }, { day: 23, name: "Día del Libro" } ],
                5: [ { day: 1, name: "Día del Trabajo" }, { day: 10, name: "Día de la Madre (México/EEUU)" }, { day: 24, name: "Batalla de Pichincha (Ecuador)" } ],
                6: [ { day: 1, name: "Día del Niño (Ecuador)" }, { day: 16, name: "Día del Padre (EEUU/Latam)" }, { day: 21, name: "Inti Raymi (Andes)" } ],
                7: [ { day: 20, name: "Día del Amigo" }, { day: 25, name: "Fundación de Guayaquil" } ],
                8: [ { day: 10, name: "Primer Grito de Independencia (Ecuador)" }, { day: 15, name: "Asunción de la Virgen" }, { day: 26, name: "Día de los Abuelos (Ecuador)" } ],
                9: [ { day: 21, name: "Día del Amor y la Amistad (Colombia)" }, { day: 26, name: "Día de la Bandera (Ecuador)" } ],
                10: [ { day: 9, name: "Independencia de Guayaquil" }, { day: 31, name: "Día del Escudo (Ecuador) / Halloween" } ],
                11: [ { day: 2, name: "Día de los Difuntos" }, { day: 3, name: "Independencia de Cuenca" } ],
                12: [ { day: 6, name: "Fundación de Quito" }, { day: 24, name: "Nochebuena" }, { day: 25, name: "Navidad" }, { day: 31, name: "Fin de Año" } ],
            };

            function renderCalendar() {
                const year = currentMonth.getFullYear();
                const month = currentMonth.getMonth();
                currentMonthYearHeader.textContent = `${currentMonth.toLocaleString('es-ES', { month: 'long', year: 'numeric' })}`;
                calendarDaysContainer.innerHTML = '';
                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const today = new Date();

                for (let i = 0; i < firstDay; i++) {
                    calendarDaysContainer.appendChild(document.createElement('div'));
                }

                for (let day = 1; day <= daysInMonth; day++) {
                    const dayElement = document.createElement('div');
                    dayElement.classList.add('calendar-day', 'current-month');
                    dayElement.textContent = day;
                    const date = new Date(year, month, day);

                    if (date.getDate() === today.getDate() && date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear()) {
                        dayElement.classList.add('today');
                    }
                    
                    const monthEvents = specialDates[month + 1] || [];
                    if (monthEvents.some(e => e.day === day)) dayElement.classList.add('event');
                    
                    if (userEvents.some(e => {
                        const eventDate = new Date(e.date + 'T00:00:00');
                        return eventDate.getDate() === day && eventDate.getMonth() === month && eventDate.getFullYear() === year;
                    })) {
                        dayElement.classList.add('user-event');
                    }
                    
                    dayElement.addEventListener('click', () => {
                        eventDateInput.value = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                        showToast(`Día ${day} seleccionado.`);
                    });
                    calendarDaysContainer.appendChild(dayElement);
                }
                renderMonthEvents();
            }
            
            function renderMonthEvents() {
                monthEventsList.innerHTML = '';
                const month = currentMonth.getMonth() + 1;
                const year = currentMonth.getFullYear();
                
                const eventsForMonth = userEvents.map(e => ({ ...e, dateObj: new Date(e.date + 'T00:00:00') }))
                                                 .filter(e => e.dateObj.getMonth() + 1 === month && e.dateObj.getFullYear() === year);

                const allEvents = (specialDates[month] || []).concat(
                    eventsForMonth.map(e => ({ day: e.dateObj.getDate(), name: e.name }))
                ).sort((a,b) => a.day - b.day);

                if (allEvents.length > 0) {
                    allEvents.forEach(event => {
                        const li = document.createElement('li');
                        li.textContent = `${event.day}: ${event.name}`;
                        monthEventsList.appendChild(li);
                    });
                } else {
                    monthEventsList.innerHTML = "<li>No hay fechas especiales.</li>";
                }
            }

            function addEvent(eventName, eventDate) {
                if (!eventName || !eventDate) {
                    showToast('Por favor, ingrese un nombre y una fecha.');
                    return;
                }
                userEvents.push({ name: eventName, date: eventDate });
                saveLocalEvents(userEvents);
                renderCalendar(); // This will re-render and show the new event
                showToast("Fecha especial añadida a su calendario.");
            }

            addEventBtn.addEventListener('click', () => {
                addEvent(eventNameInput.value.trim(), eventDateInput.value);
                eventNameInput.value = '';
                eventDateInput.value = '';
            });

            whatsappReminderBtn.addEventListener('click', () => {
                const eventName = eventNameInput.value.trim();
                const eventDate = eventDateInput.value;
                if (!eventName || !eventDate) {
                    showToast('Por favor, ingrese nombre y fecha para el recordatorio.');
                    return;
                }
                const dateObj = new Date(eventDate + 'T00:00:00');
                const dateString = dateObj.toLocaleDateString('es-ES', { day: 'numeric', month: 'long', year: 'numeric' });
                const message = `Hola D'CORE, agendar un recordatorio para: "${eventName}" el ${dateString}.`;
                const whatsappUrl = `https://wa.me/593987786632?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
            });

            prevMonthBtn.addEventListener('click', () => { currentMonth.setMonth(currentMonth.getMonth() - 1); renderCalendar(); });
            nextMonthBtn.addEventListener('click', () => { currentMonth.setMonth(currentMonth.getMonth() + 1); renderCalendar(); });

            renderCalendar();
        });
    </script>
</body>
</html>


