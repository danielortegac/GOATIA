<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D'CORE - Un Legado de Detalles del Coraz√≥n</title>
    <link rel="icon" href="./logo-dcore.jpg" type="image/x-icon">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Swiper.js for Carousels -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Paleta de Colores Vibrante */
        :root {
            --bg-light: #FFFAF5; 
            --text-dark: #402A24; 
            --primary-red: #E63946;
            --accent-orange: #F4A261; 
            --accent-green: #2A9D8F; 
            --highlight-yellow: #E9C46A;
        }

        html { scroll-behavior: smooth; }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            overflow-x: hidden;
        }
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        
        .btn-primary {
            background-color: var(--primary-red);
            color: white;
            padding: 0.85rem 2.5rem;
            border-radius: 9999px;
            font-weight: 700;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 15px rgba(230, 57, 70, 0.3);
            transform: translateY(0);
        }
        .btn-primary:hover {
            background-color: #c42d38;
            box-shadow: 0 8px 25px rgba(230, 57, 70, 0.4);
            transform: translateY(-4px);
        }
        .btn-cta:hover {
            background-color: white;
            color: var(--primary-red) !important;
        }
        
        @keyframes gradient-flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .animate-gradient-flow { background: linear-gradient(-45deg, var(--primary-red), var(--accent-orange), var(--highlight-yellow), var(--primary-red)); background-size: 400% 400%; color: transparent; background-clip: text; -webkit-background-clip: text; animation: gradient-flow 10s ease infinite; }
        
        .fade-in-up { opacity: 0; transform: translateY(40px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .in-view { opacity: 1; transform: translateY(0); }

        .product-card { background-color: #fff; border-radius: 1rem; box-shadow: 0 10px 15px rgba(0, 0, 0, 0.05); transition: transform 0.4s ease, box-shadow 0.4s ease; overflow: hidden; position: relative; }
        .product-card:hover { transform: translateY(-10px); box-shadow: 0 20px 30px rgba(0, 0, 0, 0.1); }
        .sale-badge { position: absolute; top: 1rem; left: -10px; background-color: var(--primary-red); color: white; padding: 0.35rem 1rem; border-radius: 3px; font-size: 0.9rem; font-weight: bold; transform: rotate(-5deg); box-shadow: 2px 2px 5px rgba(0,0,0,0.2); }
        .hero-swiper .swiper-slide img { width: 100%; height: 60vh; object-fit: cover; border-radius: 1.5rem; }
        .swiper-pagination-bullet-active { background: var(--primary-red) !important; }

        .story-highlight { font-weight: 700; background: linear-gradient(180deg, transparent 65%, var(--accent-orange) 65%); }

        /* Calendario Mejorado y Responsivo */
        #calendar { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
        .calendar-day { padding: 4px; font-size: 0.8rem; aspect-ratio: 1/1; display:flex; align-items:center; justify-content:center; text-align: center; border-radius: 50%; transition: all 0.2s ease; position: relative; cursor: default; }
        .calendar-day.has-event::after { content: ''; position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); width: 5px; height: 5px; border-radius: 50%; background-color: var(--primary-red); }
        .calendar-day.today { background-color: var(--highlight-yellow); color: var(--text-dark); font-weight: 700; }
        .calendar-day.user-event { background-color: var(--accent-green); color: white; }
        .calendar-day.user-event::after { background-color: white; }
        @media (max-width: 640px) { .calendar-day { padding: 2px; font-size: 0.7rem; } }

        /* Chatbot Mejorado */
        @keyframes gift-wobble { 0%, 50%, 100% { transform: scale(1) rotate(0deg); box-shadow: 0 5px 20px rgba(42, 157, 143, 0.4); } 25% { transform: scale(1.1) rotate(5deg); box-shadow: 0 10px 30px rgba(42, 157, 143, 0.5); } 75% { transform: scale(1.1) rotate(-5deg); box-shadow: 0 10px 30px rgba(42, 157, 143, 0.5); } }
        #chat-widget { position: fixed; bottom: 25px; right: 25px; z-index: 1000; }
        #chat-button { background-color: var(--accent-green); color: white; width: 65px; height: 65px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: transform 0.3s ease; animation: gift-wobble 2.5s infinite ease-in-out; }
        #chat-button.open { animation: none; }
        #chat-window { position: fixed; bottom: 100px; right: 25px; width: 90vw; max-width: 380px; height: 75vh; max-height: 550px; background-color: #F9F9F9; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.15); display: flex; flex-direction: column; transform: scale(0.95) translateY(20px); opacity: 0; transition: all 0.3s ease-in-out; pointer-events: none; z-index: 999; }
        #chat-window.open { transform: scale(1) translateY(0); opacity: 1; pointer-events: auto; }
        .chat-header { background: linear-gradient(135deg, var(--accent-green), #258a7e); }
        .chat-message { padding: 10px 15px; border-radius: 18px; margin-bottom: 10px; max-width: 85%; line-height: 1.4; animation: pop-in 0.3s ease; }
        @keyframes pop-in { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .user-message { background-color: var(--accent-orange); color: var(--text-dark); align-self: flex-end; border-bottom-right-radius: 4px; }
        .bot-message { background-color: #fff; color: var(--text-dark); align-self: flex-start; border-bottom-left-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .chat-options { display: flex; flex-wrap: wrap; justify-content: flex-start; padding-top: 5px; }
        .chat-options button { background-color: #fff; border: 1px solid var(--accent-green); color: var(--accent-green); padding: 8px 12px; border-radius: 20px; font-size: 0.9rem; transition: all 0.2s ease; margin: 4px; cursor: pointer; }
        .chat-options button:hover { background-color: var(--accent-green); color: white; }
        .typing-indicator span { display: inline-block; width: 8px; height: 8px; border-radius: 50%; background-color: #aaa; margin: 0 2px; animation: bounce 1s infinite; }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; } .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
    </style>
</head>
<body class="antialiased">

    <!-- Header & Navigation (Original Structure) -->
    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-lg shadow-sm transition-all duration-300 py-4">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <a href="#inicio" class="flex items-center space-x-3">
                <img src="./logo-dcore.jpg" alt="D'CORE Logo" class="w-12 h-12 rounded-full border-2" style="border-color: var(--accent-orange);">
                <span class="text-3xl font-bold tracking-wider" style="font-family: 'Playfair Display', serif;">D'CORE</span>
            </a>
            <nav class="hidden md:flex items-center space-x-8 text-lg">
                <a href="#nosotros" class="hover:text-red-500 transition-colors duration-300">Nuestra Historia</a>
                <a href="#promociones" class="hover:text-red-500 transition-colors duration-300">Promociones</a>
                <a href="#productos" class="hover:text-red-500 transition-colors duration-300">Productos</a>
                <a href="#contacto" class="hover:text-red-500 transition-colors duration-300">Contacto</a>
            </nav>
            <div class="flex items-center space-x-4">
                <button id="cart-btn" class="relative group">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-700 group-hover:text-red-500 transition-all" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.944.693 1.944H17.5a2.25 2.25 0 002-2.25v-2.25" /></svg>
                    <span id="cart-count" class="absolute top-[-0.5rem] right-[-0.5rem] bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center hidden">0</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Cart Modal (Original Structure) -->
    <div id="cart-modal" class="fixed top-0 right-0 h-full w-full md:w-96 bg-white shadow-2xl z-[100] p-6 flex flex-col transform translate-x-full transition-transform duration-500 ease-in-out">
        <div class="flex justify-between items-center mb-6"><h2 class="text-3xl font-bold">Tu Carrito</h2><button id="close-cart-btn" class="text-4xl hover:text-red-500 transition-colors">&times;</button></div><div id="cart-items" class="flex-1 overflow-y-auto space-y-4 pr-2"></div><div id="cart-summary" class="mt-6 pt-4 border-t border-gray-200"><div class="flex justify-between items-center text-xl font-bold mb-4"><span>Total:</span><span id="cart-total">$0.00</span></div><button id="whatsapp-btn" class="btn-primary w-full text-center">Enviar Carrito por WhatsApp</button></div>
    </div>

    <main>
        <!-- Hero Section (Original Structure) -->
        <section id="inicio" class="container mx-auto px-6 py-12">
            <div class="swiper hero-swiper shadow-xl rounded-2xl">
                <div class="swiper-wrapper" id="hero-carousel-wrapper"></div>
                <div class="swiper-pagination"></div>
            </div>
            <div class="text-center mt-12">
                <h1 class="text-6xl md:text-8xl font-black mb-4 animate-gradient-flow">D'CORE</h1>
                <p class="text-2xl md:text-3xl font-light text-gray-700" style="font-family: 'Playfair Display', serif;">Un Legado de Detalles del Coraz√≥n</p>
                <a href="#productos" class="mt-8 inline-block btn-primary">Explorar Colecci√≥n</a>
            </div>
        </section>

        <!-- Our Story Section (Original Structure) -->
        <section id="nosotros" class="container mx-auto px-6 py-20 fade-in-up">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-12">Nuestra Historia</h2>
            <div class="flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/2">
                    <img src="./IMG-20250830-WA0037.jpg" alt="Foto de la familia D'CORE" class="w-full h-auto rounded-xl shadow-lg transform rotate-2 transition-transform duration-500 hover:rotate-0">
                </div>
                <div class="md:w-1/2 text-lg leading-relaxed">
                    <p class="mb-4">La historia de D'CORE no empez√≥ en un bazar, sino en intercambios de nueve hermanos. Pepe, Alba, Marco, Paty, Lenin, Lupe, Kathy, Cubi y Marie crecieron en un hogar donde los regalos <strong class="story-highlight">no se compraban, se creaban</strong>. Cada cumplea√±os, cada Navidad, el verdadero desaf√≠o era <strong class="story-highlight">superar la creatividad</strong> del a√±o anterior.</p>
                    <p class="mb-4">El incidente detonante ocurri√≥ cuando un amigo de la familia, conmovido por un obsequio, dijo: ‚ÄúTu regalo tiene un <strong class="story-highlight">valor que el dinero no puede comprar</strong>‚Äù. Esa simple frase encendi√≥ una chispa en los hermanos.</p>
                    <p>As√≠, lo que empez√≥ como una tradici√≥n familiar se transform√≥ en una misi√≥n: <strong class="story-highlight">unir sus talentos y crear D'CORE</strong>, un lugar donde cada detalle sale del coraz√≥n.</p>
                </div>
            </div>
        </section>

        <!-- Why Choose Us Section (Original Structure) -->
        <section id="why-us" class="container mx-auto px-6 py-20">
            <div class="flex md:grid md:grid-cols-3 gap-4 md:gap-12 text-center">
                 <div class="fade-in-up" style="transition-delay: 100ms;"><div class="bg-white p-6 rounded-full w-24 h-24 mx-auto flex items-center justify-center shadow-lg mb-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="color: var(--primary-red);"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg></div><h3 class="text-xl md:text-2xl font-bold mb-2">Hecho a Mano con Amor</h3><p class="hidden md:block">Cada pieza es √∫nica, creada con dedicaci√≥n y pasi√≥n.</p></div>
                <div class="fade-in-up" style="transition-delay: 200ms;"><div class="bg-white p-6 rounded-full w-24 h-24 mx-auto flex items-center justify-center shadow-lg mb-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="color: var(--primary-red);"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" /></svg></div><h3 class="text-xl md:text-2xl font-bold mb-2">Totalmente Personalizable</h3><p class="hidden md:block">Adaptamos dise√±os a tus ideas para un regalo inolvidable.</p></div>
                <div class="fade-in-up" style="transition-delay: 300ms;"><div class="bg-white p-6 rounded-full w-24 h-24 mx-auto flex items-center justify-center shadow-lg mb-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="color: var(--primary-red);"><path d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10l2-2h8a1 1 0 001-1zM22 9h-2a1 1 0 00-1 1v6a1 1 0 001 1h2v2h-4" /></svg></div><h3 class="text-xl md:text-2xl font-bold mb-2">Entregas a todo el Ecuador</h3><p class="hidden md:block">Llevamos la magia de D'CORE hasta la puerta de tu casa.</p></div>
            </div>
        </section>

        <!-- Promotions Section (Original Structure) -->
        <section id="promociones" class="py-20">
            <div class="container mx-auto px-6">
                <div class="max-w-4xl mx-auto bg-white rounded-2xl p-8 md:p-12 text-center fade-in-up shadow-xl border-2 border-dashed" style="border-color: var(--accent-orange);">
                    <h3 class="text-3xl font-bold mb-3" style="color: var(--primary-red);">¬°OFERTA DE SEPTIEMBRE!</h3>
                    <h2 class="text-4xl md:text-5xl font-bold text-center mb-6">Amor y Amistad</h2>
                    <p class="text-xl text-gray-800 mb-8">Recibe un <strong>15% de DESCUENTO</strong> en todos los productos de las categor√≠as <strong>tejido y bordado</strong>. ¬°El detalle perfecto para esa persona especial!</p>
                    <a href="#productos" class="btn-primary">Ver Productos en Oferta</a>
                </div>
            </div>
        </section>

        <!-- How It Works Section (Original Structure) -->
        <section id="how-it-works" class="container mx-auto px-6 py-20">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-16 fade-in-up">Tu Regalo Ideal en 3 Pasos</h2>
            <div class="relative flex md:grid md:grid-cols-3 gap-4 md:gap-8">
                <div class="absolute top-12 left-0 w-full h-1 border-t-2 border-dashed border-gray-300 hidden md:block"></div>
                <div class="relative z-10 flex flex-col items-center text-center max-w-xs fade-in-up" style="transition-delay: 100ms;">
                    <div class="bg-text-dark text-white p-4 rounded-full mb-4 shadow-lg" style="background-color: var(--text-dark);"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg></div>
                    <h3 class="text-xl md:text-2xl font-bold mb-2">1. Explora y Elige</h3>
                    <p class="hidden md:block">Navega por nuestra colecci√≥n y encuentra el producto que te enamore.</p>
                </div>
                <div class="relative z-10 flex flex-col items-center text-center max-w-xs fade-in-up" style="transition-delay: 200ms;">
                    <div class="bg-text-dark text-white p-4 rounded-full mb-4 shadow-lg" style="background-color: var(--text-dark);"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></div>
                    <h3 class="text-xl md:text-2xl font-bold mb-2">2. Personaliza</h3>
                    <p class="hidden md:block">A√±ade los productos al carrito y env√≠anos tu pedido para afinar los detalles.</p>
                </div>
                <div class="relative z-10 flex flex-col items-center text-center max-w-xs fade-in-up" style="transition-delay: 300ms;">
                    <div class="bg-text-dark text-white p-4 rounded-full mb-4 shadow-lg" style="background-color: var(--text-dark);"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10l2-2h8a1 1 0 001-1zM22 9h-2a1 1 0 00-1 1v6a1 1 0 001 1h2v2h-4" /></svg></div>
                    <h3 class="text-xl md:text-2xl font-bold mb-2">3. Rec√≠belo</h3>
                    <p class="hidden md:block">Coordinamos el pago y te lo enviamos a cualquier parte del Ecuador.</p>
                </div>
            </div>
        </section>

        <!-- NEW Calendar Service Section -->
        <section id="reminder-service" class="py-20" style="background-color: var(--accent-green); background-image: linear-gradient(135deg, var(--accent-green) 0%, #258a7e 100%);">
            <div class="container mx-auto px-6 fade-in-up">
                <div class="text-center mb-12 text-white">
                    <h2 class="text-4xl md:text-5xl font-bold mb-4">El Guardi√°n de Fechas</h2>
                    <p class="max-w-3xl mx-auto text-lg text-green-100">¬°No vuelva a olvidar una fecha importante! Revise nuestro calendario de celebraciones y agende sus recordatorios personales. Nosotros le avisaremos.</p>
                </div>
                <div class="max-w-6xl mx-auto grid lg:grid-cols-5 gap-8 items-start">
                    <div class="lg:col-span-3 bg-white p-4 sm:p-6 rounded-2xl shadow-lg">
                        <div id="calendar-header" class="flex justify-between items-center mb-4"><button id="prev-month" class="p-2 rounded-full hover:bg-gray-100">&lt;</button><h3 id="month-year" class="text-xl font-bold text-center"></h3><button id="next-month" class="p-2 rounded-full hover:bg-gray-100">&gt;</button></div>
                        <div id="calendar-weekdays" class="grid grid-cols-7 gap-2 text-center font-semibold text-gray-500 text-xs sm:text-sm mb-2"><div>D</div><div>L</div><div>M</div><div>M</div><div>J</div><div>V</div><div>S</div></div>
                        <div id="calendar"></div>
                    </div>
                    <div class="lg:col-span-2">
                        <div class="bg-white/90 backdrop-blur-sm p-6 rounded-2xl shadow-lg mb-6">
                            <h3 class="text-2xl font-bold mb-4">Fechas de <span id="events-month"></span></h3>
                            <ul id="events-list" class="space-y-2 text-gray-700 h-32 overflow-y-auto pr-2 text-sm"><li>Cargando...</li></ul>
                        </div>
                        <div class="bg-white/90 backdrop-blur-sm p-6 rounded-2xl shadow-lg">
                            <h3 class="text-2xl font-bold mb-4">Agende su Fecha Especial</h3>
                            <form id="date-form" class="flex flex-col gap-4">
                                <input type="text" id="event-name" placeholder="Ej: Aniversario con mi amor" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-400" required>
                                <input type="date" id="event-date" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-400" required>
                                <button type="submit" class="btn-primary">¬°Agendar y Recordar!</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Product Gallery Section (Original Structure) -->
        <section id="productos" class="py-20 my-12">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-12 fade-in-up">Nuestras Creaciones</h2>
                <div id="product-grid" class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-8"></div>
            </div>
        </section>

        <!-- Testimonials Section (Original Structure) -->
        <section id="testimonials" class="container mx-auto px-6 py-20">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-12 fade-in-up">Lo que dicen Nuestros Clientes</h2>
            <div class="swiper testimonials-swiper max-w-3xl mx-auto fade-in-up">
                <div class="swiper-wrapper" id="testimonials-wrapper"></div>
                <div class="swiper-pagination mt-8"></div>
            </div>
        </section>

        <!-- Call to Action Section (Original Structure) -->
        <section id="contacto" class="container mx-auto px-6 py-20 text-center">
             <div class="bg-gradient-to-tr from-gray-800 to-gray-900 rounded-3xl shadow-xl p-8 md:p-16 fade-in-up">
                <h2 class="text-4xl md:text-5xl font-bold mb-4 text-white">¬øTiene una idea? La hacemos realidad.</h2>
                <p class="text-lg md:text-xl mb-10 max-w-3xl mx-auto text-gray-300">Su imaginaci√≥n es el √∫nico l√≠mite. Realizamos personajes de cualquier serie, pel√≠cula o videojuego. Env√≠enos su inspiraci√≥n y nuestro equipo de artesanos la transformar√° en una pieza de arte tangible y exclusiva para usted.</p>
                <a href="https://wa.me/593987786632?text=Hola%20D'CORE,%20me%20gustar√≠a%20cotizar%20un%20regalo%20personalizado." target="_blank" class="btn-primary">Cotice su Idea Aqu√≠</a>
             </div>
        </section>
    </main>

    <!-- Footer (Original Structure) -->
    <footer class="text-white pt-16 pb-8" style="background-color: var(--text-dark);">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left">
                <div class="flex flex-col items-center md:items-start">
                    <div class="flex items-center space-x-3 mb-4"><img src="./logo-dcore.jpg" alt="D'CORE Logo" class="w-12 h-12 rounded-full"><span class="text-2xl font-bold" style="font-family: 'Playfair Display', serif;">D'CORE</span></div>
                    <p class="max-w-xs text-gray-400">Un Legado de Detalles del Coraz√≥n.</p>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">Navegaci√≥n</h4>
                    <ul class="space-y-2">
                        <li><a href="#nosotros" class="text-gray-400 hover:text-white transition-colors">Nuestra Historia</a></li>
                        <li><a href="#promociones" class="text-gray-400 hover:text-white transition-colors">Promociones</a></li>
                        <li><a href="#productos" class="text-gray-400 hover:text-white transition-colors">Productos</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">S√≠ganos</h4>
                    <div class="flex justify-center md:justify-start space-x-6">
                        <a href="https://www.instagram.com/_hannah.yanez/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transform hover:scale-125 transition-transform"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.013-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.345 2.525c.636-.247 1.363-.416 2.427-.465C9.792 2.013 10.146 2 12.315 2zM12 7.044c-2.749 0-4.973 2.224-4.973 4.973S9.251 16.99 12 16.99s4.973-2.224 4.973-4.973S14.749 7.044 12 7.044zM12 14.9a2.904 2.904 0 110-5.808 2.904 2.904 0 010 5.808zM16.949 6.02a1.185 1.185 0 11-2.37.001 1.185 1.185 0 012.37-.001z" clip-rule="evenodd" /></svg></a>
                        <a href="https://wa.me/593987786632" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transform hover:scale-125 transition-transform"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.35 3.4 16.86L2.05 22L7.31 20.75C8.77 21.48 10.38 21.89 12.04 21.89C17.5 21.89 21.95 17.44 21.95 11.98C21.95 9.32 20.96 6.84 19.13 4.99C17.28 3.14 14.79 2 12.04 2M12.04 3.67C14.24 3.67 16.31 4.53 17.87 6.09C19.42 7.65 20.28 9.72 20.28 11.92C20.28 16.56 16.59 20.25 11.95 20.25C10.46 20.25 9.03 19.88 7.79 19.18L7.42 18.96L4.38 19.78L5.22 16.81L4.97 16.42C4.18 15.11 3.77 13.54 3.77 11.91C3.77 7.27 7.46 3.67 12.04 3.67M9.13 7.5C8.91 7.5 8.7 7.55 8.51 7.92C8.31 8.29 7.68 9.53 7.68 10.84C7.68 12.15 8.53 13.4 8.68 13.58C8.83 13.77 10.56 16.32 13.08 17.31C15.04 18.06 15.61 17.84 16.08 17.79C16.56 17.74 17.42 17.22 17.62 16.56C17.81 15.89 17.81 15.35 17.74 15.25C17.67 15.16 17.47 15.09 17.22 14.97C16.97 14.84 15.71 14.22 15.49 14.13C15.26 14.04 15.11 13.99 14.96 14.27C14.81 14.55 14.34 15.11 14.2 15.28C14.07 15.45 13.92 15.47 13.67 15.35C13.42 15.22 12.63 14.95 11.67 14.1C10.91 13.43 10.39 12.61 10.27 12.35C10.14 12.1 10.26 11.97 10.39 11.84C10.5 11.73 10.64 11.53 10.79 11.36C10.93 11.19 10.98 11.07 11.08 10.89C11.18 10.71 11.13 10.56 11.06 10.44C10.98 10.32 10.56 9.23 10.36 8.75C10.17 8.27 9.98 7.85 9.81 7.85C9.64 7.85 9.46 7.85 9.28 7.85" /></svg></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
                <p>&copy; 2025 D'CORE. Hecho con ‚ù§Ô∏è en Ecuador.</p>
                <p class="text-sm mt-2">Dise√±ado por <a href="https://www.goatify.app/web" target="_blank" rel="noopener noreferrer" class="font-semibold text-white hover:underline">Goatify IA</a> en colaboraci√≥n con <b class="font-semibold text-white">Hannah Y√°nez</b>, fundadora de la marca.</p>
            </div>
        </div>
    </footer>

    <!-- Toast & Chatbot -->
    <div id="toast" class="fixed bottom-8 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-500 opacity-0 -translate-y-4 z-[101]"></div>
    <div id="chat-widget"><div id="chat-window"><div class="chat-header text-white rounded-t-2xl p-4 flex justify-between items-center"><div><h3 class="font-bold text-lg">Asistente D'CORE</h3><p class="text-sm opacity-90">Disponible para usted</p></div><button id="close-chat" class="text-2xl opacity-80 hover:opacity-100">&times;</button></div><div id="chat-body" class="flex-1 p-4 overflow-y-auto flex flex-col gap-3"></div><div class="p-2 border-t bg-white rounded-b-2xl"><div id="chat-options-container" class="p-2"></div><form id="chat-form" class="flex gap-2 p-2"><input type="text" id="chat-input" placeholder="Escriba su mensaje..." class="flex-1 p-3 border border-gray-300 rounded-full focus:ring-2 focus:ring-green-400 text-sm" autocomplete="off"><button type="submit" class="bg-green-500 text-white rounded-full w-12 h-12 flex items-center justify-center flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 5l7 7-7 7M5 12h14" /></svg></button></form></div></div><button id="chat-button"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 8v13"></path><path d="M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"></path><path d="M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 9 0a2.5 2.5 0 0 1 0 5"></path><rect x="3" y="8" width="18" height="4" rx="1"></rect></svg></button></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- ORIGINAL DATA & CONFIG ---
            const PROMOTION_DISCOUNT = 0.15;
            const PROMOTION_CATEGORIES = ['tejido', 'bordado'];
            const allProducts = [
                { name: "Amigurumi Pollito", price: 22.00, image: "./IMG-20250830-WA0045.jpg", category: 'tejido' },
                { name: "Sudadera Bordada Floral", price: 45.00, image: "./IMG-20250830-WA0046.jpg", category: 'bordado' },
                { name: "Amigurumi Stich", price: 25.00, image: "./IMG-20250830-WA0047.jpg", category: 'tejido' },
                { name: "Llavero de Madera", price: 15.00, image: "./IMG-20250830-WA0042.jpg", category: 'madera' },
                { name: "Detalle en Madera", price: 18.00, image: "./IMG-20250830-WA0043.jpg", category: 'madera' },
                { name: "Bordado Personalizado", price: 35.00, image: "./IMG-20250830-WA0044.jpg", category: 'bordado' },
                { name: "Caja de Recuerdos", price: 30.00, image: "./IMG-20250830-WA0039.jpg", category: 'madera' },
                { name: "Amigurumi Osito", price: 20.00, image: "./IMG-20250830-WA0040.jpg", category: 'tejido' },
                { name: "Detalle Bordado Coraz√≥n", price: 28.00, image: "./IMG-20250830-WA0041.jpg", category: 'bordado' },
                { name: "Recuerdo Familiar", price: 40.00, image: "./IMG-20250830-WA0037.jpg", category: 'madera' },
                { name: "Base de Madera Decorativa", price: 25.00, image: "./IMG-20250830-WA0036.jpg", category: 'madera' },
                { name: "Llavero Aguacate", price: 12.00, image: "./IMG-20250830-WA0033.jpg", category: 'tejido' },
                { name: "Set de Llaveros", price: 20.00, image: "./IMG-20250830-WA0034.jpg", category: 'madera' },
                { name: "Llavero Tejido", price: 10.00, image: "./IMG-20250830-WA0035.jpg", category: 'tejido' },
                { name: "Grabado en Madera", price: 28.00, image: "./IMG-20250830-WA0031.jpg", category: 'madera' },
                { name: "Recuerdo en Madera", price: 26.00, image: "./IMG-20250830-WA0032.jpg", category: 'madera' },
                { name: "Figura de Madera Girasol", price: 24.00, image: "./IMG-20250830-WA0028.jpg", category: 'madera' },
                { name: "Llavero Tallado Gato", price: 15.00, image: "./IMG-20250830-WA0029.jpg", category: 'madera' },
                { name: "Caja de Madera Personalizada", price: 30.00, image: "./IMG-20250830-WA0030.jpg", category: 'madera' },
                { name: "Detalle Tallado Especial", price: 18.00, image: "./IMG-20250830-WA0027.jpg", category: 'madera' },
                { name: "Amigurumi Dinosaurio", price: 25.00, image: "./IMG-20250830-WA0025.jpg", category: 'tejido' },
                { name: "Mu√±eco de Lana (Dise√±o 2)", price: 25.00, image: "./IMG-20250830-WA0026.jpg", category: 'tejido' },
                { name: "Llavero Tallado (Dise√±o 2)", price: 15.00, image: "./IMG-20250830-WA0023.jpg", category: 'madera' },
                { name: "Camiseta Bordada (Dise√±o 2)", price: 40.00, image: "./IMG-20250830-WA0024.jpg", category: 'bordado' },
                { name: "Figura de Madera Grabada", price: 35.00, image: "./IMG-20250830-WA0020.jpg", category: 'madera' },
                { name: "Mu√±eco Personalizado", price: 50.00, image: "./IMG-20250830-WA0021.jpg", category: 'tejido' },
                { name: "Caja de Madera (Dise√±o 2)", price: 32.00, image: "./IMG-20250830-WA0022.jpg", category: 'madera' },
            ];
            const testimonials = [{ text: "¬°El mu√±eco que ped√≠ super√≥ mis expectativas! La calidad y el cari√±o que le ponen a cada detalle es incre√≠ble. 100% recomendado.", author: "Ana G., Quito" }, { text: "El regalo perfecto. Mi sudadera bordada es mi nueva prenda favorita. Gracias D'CORE por crear algo tan especial.", author: "Carlos R., Guayaquil" }, { text: "Excelente servicio y el grabado en madera qued√≥ precioso. Un recuerdo que atesorar√© para siempre.", author: "Sof√≠a M., Cuenca" }, { text: "El llavero de aguacate es adorable. Se nota que est√° hecho con mucho amor. ¬°Definitivamente volver√© a comprar!", author: "Mateo V., Ambato" }, { text: "¬°Me encant√≥! El env√≠o fue s√∫per r√°pido y el producto lleg√≥ en perfectas condiciones. Calidad de exportaci√≥n.", author: "Valentina C., Manta" }];

            const showToast = (message) => { const toast = document.getElementById('toast'); toast.textContent = message; toast.classList.remove('opacity-0', '-translate-y-4'); toast.classList.add('opacity-100', 'translate-y-0'); setTimeout(() => { toast.classList.remove('opacity-100', 'translate-y-0'); toast.classList.add('opacity-0', '-translate-y-4'); }, 3000); };
            const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('in-view'); observer.unobserve(entry.target); } }); }, { threshold: 0.1 });
            document.querySelectorAll('.fade-in-up').forEach(el => observer.observe(el));

            // --- CAROUSELS (Original Logic) ---
            (() => {
                const heroWrapper = document.getElementById('hero-carousel-wrapper');
                allProducts.forEach(product => { heroWrapper.innerHTML += `<div class="swiper-slide"><img src="${product.image}" alt="${product.name}" loading="lazy"></div>`; });
                new Swiper('.hero-swiper', { loop: true, autoplay: { delay: 3000, disableOnInteraction: false }, pagination: { el: '.swiper-pagination', clickable: true }, effect: 'slide', grabCursor: true });
                
                const testimonialsWrapper = document.getElementById('testimonials-wrapper');
                const starSVG = `<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>`.repeat(5);
                testimonials.forEach(t => testimonialsWrapper.innerHTML += `<div class="swiper-slide text-center p-8"><div class="flex justify-center mb-4 text-yellow-500">${starSVG}</div><p class="text-xl italic text-gray-700">"${t.text}"</p><p class="mt-4 font-bold text-lg">- ${t.author}</p></div>`);
                new Swiper('.testimonials-swiper', { loop: true, autoplay: { delay: 5000, disableOnInteraction: false }, pagination: { el: '.swiper-pagination', clickable: true }, grabCursor: true });
            })();

            // --- PRODUCTS & CART (Original Logic) ---
            (() => {
                const productGrid = document.getElementById('product-grid');
                allProducts.forEach((product) => {
                    const isOnSale = PROMOTION_CATEGORIES.includes(product.category);
                    const finalPrice = isOnSale ? product.price * (1 - PROMOTION_DISCOUNT) : product.price;
                    const saleBadgeHTML = isOnSale ? `<div class="sale-badge">${PROMOTION_DISCOUNT * 100}% OFF</div>` : '';
                    const priceHTML = isOnSale ? `<div class="flex items-center justify-center gap-2"><span class="text-gray-500 line-through text-base">$${product.price.toFixed(2)}</span><span class="text-2xl font-bold" style="color:var(--primary-red)">$${finalPrice.toFixed(2)}</span></div>` : `<span class="text-2xl font-bold">$${product.price.toFixed(2)}</span>`;
                    productGrid.innerHTML += `<div class="product-card flex flex-col text-center"><div class="overflow-hidden relative"><img src="${product.image}" alt="${product.name}" class="w-full h-56 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x400/FFFAF5/402A24?text=${encodeURIComponent(product.name)}';">${saleBadgeHTML}</div><div class="p-4 md:p-6 flex flex-col flex-grow"><h3 class="text-lg font-semibold mb-2 flex-grow">${product.name}</h3><div class="my-4">${priceHTML}</div><button class="add-to-cart-btn btn-primary mt-auto text-sm" data-name="${product.name}" data-price="${finalPrice}" data-image="${product.image}">A√±adir al Carrito</button></div></div>`;
                });
                let cart = [];
                const cartModal = document.getElementById('cart-modal');
                const updateCart = () => {
                    const cartItems = document.getElementById('cart-items'), totalEl = document.getElementById('cart-total'), countEl = document.getElementById('cart-count');
                    cartItems.innerHTML = ''; let total = 0, count = 0;
                    if (cart.length === 0) { cartItems.innerHTML = '<p class="text-center text-gray-500 py-10">Tu carrito est√° vac√≠o.</p>'; countEl.classList.add('hidden'); }
                    else { cart.forEach((item, index) => { total += item.price * item.quantity; count += item.quantity; cartItems.innerHTML += `<div class="flex items-center space-x-4 p-2 bg-gray-50 rounded-lg"><img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded-md"><div class="flex-1"><h4 class="font-bold text-sm">${item.name}</h4><p class="text-xs text-gray-600">$${item.price.toFixed(2)}</p><div class="flex items-center mt-1"><button class="quantity-change text-lg font-bold px-2" data-index="${index}" data-amount="-1">-</button><span class="px-3 text-sm">${item.quantity}</span><button class="quantity-change text-lg font-bold px-2" data-index="${index}" data-amount="1">+</button></div></div><span class="font-semibold text-lg">$${(item.price*item.quantity).toFixed(2)}</span></div>`; }); countEl.textContent = count; countEl.classList.remove('hidden'); }
                    totalEl.textContent = `$${total.toFixed(2)}`;
                };
                document.getElementById('cart-btn').addEventListener('click', () => cartModal.classList.remove('translate-x-full'));
                document.getElementById('close-cart-btn').addEventListener('click', () => cartModal.classList.add('translate-x-full'));
                document.getElementById('product-grid').addEventListener('click', e => { if (e.target.classList.contains('add-to-cart-btn')) { const {name, price, image} = e.target.dataset; const existing = cart.find(i => i.name === name); if (existing) existing.quantity++; else cart.push({ name, price: +price, image, quantity: 1 }); updateCart(); showToast(`'${name}' a√±adido.`); }});
                document.getElementById('cart-items').addEventListener('click', e => { if(e.target.classList.contains('quantity-change')) { const {index, amount} = e.target.dataset; cart[index].quantity += +amount; if(cart[index].quantity <= 0) cart.splice(index, 1); updateCart(); }});
                document.getElementById('whatsapp-btn').addEventListener('click', () => { if (cart.length === 0) { showToast("Tu carrito est√° vac√≠o."); return; } let msg = "¬°Hola D'CORE! ‚ú® Me gustar√≠a comprar los siguientes productos:\n\n"; cart.forEach(i => { msg += `*${i.quantity}x* - ${i.name} ($${i.price.toFixed(2)} c/u)\n`; }); msg += `\n*Total a pagar: ${document.getElementById('cart-total').textContent}*\n\n¬°Gracias! Quedo a la espera de su confirmaci√≥n. üòä`; window.open(`https://wa.me/593987786632?text=${encodeURIComponent(msg)}`, '_blank'); });
                updateCart();
            })();

            // --- NEW CALENDAR LOGIC ---
            (() => {
                let currentDate = new Date();
                const importantDates = {0:[{d:1,e:"A√±o Nuevo"},{d:4,e:"D√≠a Mundial del Braille"},{d:21,e:"D√≠a del Abrazo"}],1:[{d:4,e:"D√≠a contra el C√°ncer"},{d:13,e:"D√≠a del Soltero"},{d:14,e:"San Valent√≠n"},{d:17,e:"D√≠a del Gato"}],2:[{d:8,e:"D√≠a de la Mujer"},{d:15,e:"D√≠a del Sue√±o"},{d:19,e:"D√≠a del Hombre/Artesano"},{d:20,e:"D√≠a de la Felicidad"},{d:21,e:"D√≠a del Perro/Poes√≠a"}],3:[{d:7,e:"D√≠a de la Salud"},{d:13,e:"D√≠a del Beso"},{d:22,e:"D√≠a de la Tierra"},{d:23,e:"D√≠a del Libro"}],4:[{d:1,e:"D√≠a del Trabajo"},{d:4,e:"D√≠a de Star Wars"},{d:12,e:"D√≠a de la Madre (EC)"},{d:15,e:"D√≠a del Maestro (EC)"},{d:24,e:"Batalla de Pichincha"},{d:25,e:"D√≠a del Orgullo Friki"}],5:[{d:1,e:"D√≠a del Ni√±o"},{d:5,e:"D√≠a del Medio Ambiente"},{d:8,e:"D√≠a de los Oc√©anos"},{d:16,e:"D√≠a del Padre (EC)"},{d:21,e:"D√≠a de la M√∫sica"}],6:[{d:4,e:"Indep. de EEUU"},{d:13,e:"D√≠a del Rock"},{d:20,e:"D√≠a del Amigo"},{d:26,e:"D√≠a de los Abuelos"}],7:[{d:8,e:"D√≠a Internacional del Gato"},{d:10,e:"Primer Grito de Independencia"},{d:13,e:"D√≠a de los Zurdos"},{d:19,e:"D√≠a de la Fotograf√≠a"}],8:[{d:1,e:"D√≠a de la Barba"},{d:21,e:"D√≠a de la Paz"},{d:27,e:"D√≠a del Turismo"}],9:[{d:4,e:"D√≠a de los Animales"},{d:9,e:"Indep. de Guayaquil"},{d:16,e:"D√≠a del Jefe"},{d:31,e:"Halloween / D√≠a del Escudo"}],10:[{d:1,e:"D√≠a del Veganismo"},{d:2,e:"D√≠a de los Difuntos"},{d:3,e:"Indep. de Cuenca"}],11:[{d:6,e:"Fundaci√≥n de Quito"},{d:25,e:"Navidad"},{d:28,e:"D√≠a de los Inocentes"},{d:31,e:"Fin de A√±o"}]};
                let userEvents = JSON.parse(localStorage.getItem('dcoreUserEvents')) || [];
                const renderCalendar = () => {
                    const calendarEl=document.getElementById('calendar'), monthYearEl=document.getElementById('month-year'), eventsListEl=document.getElementById('events-list'), eventsMonthEl=document.getElementById('events-month');
                    calendarEl.innerHTML=''; eventsListEl.innerHTML='';
                    const year=currentDate.getFullYear(), month=currentDate.getMonth();
                    const monthName = currentDate.toLocaleDateString('es-ES',{month:'long'});
                    monthYearEl.textContent=`${monthName.charAt(0).toUpperCase()+monthName.slice(1)} ${year}`;
                    eventsMonthEl.textContent=monthName;
                    const monthEvents = importantDates[month]||[];
                    monthEvents.forEach(evt => eventsListEl.innerHTML+=`<li><strong class="text-red-500">${evt.d}:</strong> ${evt.e}</li>`);
                    userEvents.filter(e=>e.m===month && e.y===year).forEach(evt => eventsListEl.innerHTML+=`<li><strong class="text-green-500">${evt.d}:</strong> ${evt.e} (Su evento)</li>`);
                    if(eventsListEl.innerHTML==='') eventsListEl.innerHTML='<li>No hay eventos este mes.</li>';
                    const firstDayOfMonth=(new Date(year,month,1).getDay() + 6) % 7;
                    const daysInMonth=new Date(year,month+1,0).getDate();
                    for(let i=0;i<firstDayOfMonth;i++) calendarEl.innerHTML+='<div></div>';
                    for(let day=1;day<=daysInMonth;day++){
                        const dayEl=document.createElement('div');
                        dayEl.textContent=day; dayEl.className='calendar-day';
                        if(day===new Date().getDate()&&month===new Date().getMonth()&&year===new Date().getFullYear()) dayEl.classList.add('today');
                        if(monthEvents.some(e=>e.d===day)) dayEl.classList.add('has-event');
                        if(userEvents.some(e=>e.d===day&&e.m===month&&e.y===year)) dayEl.classList.add('user-event');
                        calendarEl.appendChild(dayEl);
                    }
                };
                document.getElementById('prev-month').addEventListener('click',()=>{currentDate.setMonth(currentDate.getMonth()-1);renderCalendar();});
                document.getElementById('next-month').addEventListener('click',()=>{currentDate.setMonth(currentDate.getMonth()+1);renderCalendar();});
                document.getElementById('date-form').addEventListener('submit',(e)=>{
                    e.preventDefault();
                    const eventName=document.getElementById('event-name').value;
                    const eventDate=document.getElementById('event-date').value;
                    const [year,month,day]=eventDate.split('-').map(Number);
                    userEvents.push({y:year,m:month-1,d:day,e:eventName});
                    localStorage.setItem('dcoreUserEvents',JSON.stringify(userEvents));
                    const formattedDate=new Date(eventDate+'T00:00:00').toLocaleDateString('es-EC',{dateStyle:'full'});
                    const text=`¬°Hola D'CORE! Por favor, agenden un recordatorio para mi evento: "${eventName}" en la fecha ${formattedDate}. ¬°Gracias!`;
                    window.open(`https://wa.me/593987786632?text=${encodeURIComponent(text)}`,'_blank');
                    showToast(`'${eventName}' agendado.`); e.target.reset(); renderCalendar();
                });
                renderCalendar();
            })();

            // --- NEW CHATBOT LOGIC ---
            (() => {
                const chatButton = document.getElementById('chat-button'), chatWindow = document.getElementById('chat-window'), closeChat = document.getElementById('close-chat'), chatBody = document.getElementById('chat-body'), chatForm = document.getElementById('chat-form'), chatInput = document.getElementById('chat-input'), optionsContainer = document.getElementById('chat-options-container');
                const toggleChat = () => { chatWindow.classList.toggle('open'); chatButton.classList.toggle('open'); };
                chatButton.addEventListener('click', toggleChat);
                closeChat.addEventListener('click', toggleChat);
                const addMessage = (text, sender) => { const el = document.createElement('div'); el.className = `chat-message ${sender}-message`; el.innerHTML = text; chatBody.appendChild(el); chatBody.scrollTop = chatBody.scrollHeight; };
                const showTyping = () => { const el = document.createElement('div'); el.className = 'chat-message bot-message typing-indicator'; el.innerHTML='<span></span><span></span><span></span>'; chatBody.appendChild(el); chatBody.scrollTop = chatBody.scrollHeight; return el; };
                const showOptions = (options) => { optionsContainer.innerHTML = ''; const container = document.createElement('div'); container.className = 'chat-options'; options.forEach(opt => { const btn = document.createElement('button'); btn.textContent = opt.text; btn.dataset.payload = opt.payload; container.appendChild(btn); }); optionsContainer.appendChild(container); };
                const conversationTree = {
                    'start': { response: "¬°Bienvenido/a a D'CORE! Soy su asistente virtual. ¬øC√≥mo puedo ayudarle hoy?", options: [{text:"Ver Productos", payload:"products"}, {text:"Env√≠os y Entregas", payload:"shipping"}, {text:"Otra Consulta", payload:"other"}] },
                    'products': { response: "Manejamos creaciones en tejido, bordado y madera. ¬øLe gustar√≠a saber sobre los precios, ver ejemplos o preguntar por una personalizaci√≥n?", options: [{text:"Precios Generales", payload:"prices"}, {text:"Personalizaci√≥n", payload:"custom"}, {text:"Volver", payload:"start"}] },
                    'shipping': { response: "Realizamos env√≠os a todo el Ecuador a trav√©s de Servientrega. El costo y tiempo de entrega var√≠an seg√∫n su ciudad. Usualmente tarda de 2 a 3 d√≠as h√°biles.", options: [{text:"Gracias", payload:"thanks"}, {text:"Volver", payload:"start"}] },
                    'other': { response: "Entendido. Por favor, escriba su consulta y con gusto le atender√©.", options: [] },
                    'unknown': { response: "Disculpe, no he comprendido su consulta. Tal vez le interese preguntar sobre alguno de los siguientes temas:", options: [{text:"Productos", payload:"products"}, {text:"Env√≠os", payload:"shipping"}, {text:"Cotizar Idea", payload:"custom"}]},
                    'prices': { response: "Los precios son variados. Amigurumis desde $20, sudaderas desde $45, detalles en madera desde $15. Para un valor exacto, lo mejor es cotizar su idea.", options: [{text:"Cotizar", payload:"custom"}, {text:"Volver", payload:"products"}]},
                    'custom': { response: "¬°Perfecto! Para cotizar una idea personalizada, por favor cont√°ctenos por WhatsApp con su imagen o descripci√≥n. Puede hacerlo desde el bot√≥n 'Cotice su Idea Aqu√≠' en la p√°gina.", options: [{text:"Gracias", payload:"thanks"}, {text:"Volver", payload:"start"}]},
                    'thanks': { response: "¬øHay algo m√°s en lo que pueda asistirle?", options: [{text:"S√≠, por favor", payload:"start"}, {text:"No, gracias", payload:"end"}] },
                    'end': { response: "Fue un placer atenderle. ¬°Que tenga un excelente d√≠a!", options: []}
                };
                const handlePayload = (payload) => {
                    const node = conversationTree[payload];
                    if (node) { const typing = showTyping(); setTimeout(() => { typing.remove(); addMessage(node.response, 'bot'); showOptions(node.options); }, 800); }
                };
                optionsContainer.addEventListener('click', e => { if (e.target.tagName === 'BUTTON') { const {payload} = e.target.dataset; addMessage(e.target.textContent, 'user'); handlePayload(payload); } });
                chatForm.addEventListener('submit', (e) => { e.preventDefault(); const userInput = chatInput.value.trim(); if(userInput) { addMessage(userInput, 'user'); chatInput.value = ''; handlePayload('unknown');} });
                addMessage(conversationTree.start.response, 'bot');
                showOptions(conversationTree.start.options);
            })();
        });
    </script>
</body>
</html>

