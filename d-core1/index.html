<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- SEO Mejorado -->
    <title>D'CORE | Regalos Personalizados y Artesanías</title>
    <meta name="description" content="Descubre D'CORE, el arte de regalar un legado. Piezas únicas de alta artesanía hechas a mano en Quito, Ecuador. Regalos personalizados con alma que cuentan historias.">
    <meta name="keywords" content="regalos personalizados Ecuador, artesanías Quito, D'CORE, detalles hechos a mano, regalos con alma, madera, bordado, tejido, amigurumi, regalos corporativos Ecuador, regalos únicos, testimonios clientes D'CORE, muebles a la medida, clases de tejido">
    <meta name="author" content="D'CORE">
    <link rel="canonical" href="https://www.dcorelegado.com">
    <!-- Open Graph (para redes sociales como Facebook) -->
    <meta property="og:title" content="D'CORE | El Arte de Regalar un Legado">
    <meta property="og:description" content="Piezas únicas de alta artesanía hechas a mano en Ecuador. Regalos personalizados con alma que cuentan historias.">
    <meta property="og:image" content="https://www.dcorelegado.com/logo-dcore.jpg">
    <meta property="og:url" content="https://www.dcorelegado.com">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="es_EC">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="D'CORE | El Arte de Regalar un Legado">
    <meta name="twitter:description" content="Piezas únicas de alta artesanía hechas a mano en Ecuador. Regalos personalizados con alma que cuentan historias.">
    <meta name="twitter:image" content="https://www.dcorelegado.com/logo-dcore.jpg">
    <!-- Favicon -->
    <link rel="icon" href="logo-dcore.jpg" type="image/jpeg">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- Font Awesome para íconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" xintegrity="sha512-iecdLmaskl7CVw4dZpMOZF4Kjj3v+3K5/zUf2lA/6c/z0Zz0Zz0Zz0Zz0Zz0Zz0Zz0Zz0Zz0Zz0Zz0Zz0Zz0Zz0=" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        :root {
            --background: #fdf6ec; /* Un beige muy claro y cálido */
            --text-dark: #2c2c2c; /* Negro profundo para el texto */
            --text-light: #5a5a5a; /* Gris oscuro para texto secundario */
            --primary: #c0392b; /* Rojo fuerte */
            --primary-dark: #a5281a; /* Rojo oscuro para hover */
            --accent-green: #27ae60; /* Verde */
            --accent-orange: #e67e22; /* Naranja */
            --surface: #ffffff; /* Blanco para superficies */
            --border: #e0e0e0;
            --gold: #f1c40f; /* Amarillo vibrante para promociones */
        }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background);
            color: var(--text-dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        h1, h2, h3, h4, .font-serif {
            font-family: 'Cormorant Garamond', serif;
        }
        /* ===== ANIMACIONES MEJORADAS ===== */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-up { 
            opacity: 0; 
            animation-fill-mode: forwards; 
        }
        .is-visible { 
            animation: fadeInUp 1s cubic-bezier(0.19, 1, 0.22, 1) forwards; 
        }
        /* Animación de brillo para los títulos (más sutil y elegante) */
        @keyframes shine {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .animated-title {
            background: linear-gradient(90deg, #2c2c2c 0%, #a5a5a5 50%, #2c2c2c 100%);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shine 6s infinite linear; /* Duración aumentada para más elegancia */
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .promotional-badge {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* ===== ESTILOS GENERALES Y TRANSICIONES ===== */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--background); }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-dark); }
        
        /* Transiciones suaves para todos los elementos interactivos */
        .group, button, a, img, .product-card, .shadow-lg {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .carousel-track {
            transition: transform 0.5s ease-in-out;
        }
        .gold-glow {
            border: 3px solid var(--gold);
            box-shadow: 0 0 25px rgba(241, 196, 15, 0.6),
                        inset 0 0 15px rgba(241, 196, 15, 0.3);
        }
        .testimonials-carousel-container::-webkit-scrollbar {
            display: none;
        }
        .testimonials-carousel-container {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* ===== MEJORAS AL CARRITO DE COMPRAS ===== */
        #cart-modal .modal-content {
            background-color: var(--surface); /* Fondo SÓLIDO y limpio */
            border-radius: 1rem; /* Esquinas más redondeadas */
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.35); /* Sombra más pronunciada para destacar */
            border: 1px solid var(--border); /* Borde sutil para definir la tarjeta */
        }
        /* Botones de cantidad del carrito */
        .quantity-change {
            background-color: #f3f4f6;
            color: var(--text-dark);
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .quantity-change:hover {
            background-color: var(--primary);
            color: white;
            transform: scale(1.1);
        }
        /* Botón de eliminar del carrito */
        .remove-item:hover {
            color: var(--primary-dark);
            transform: rotate(90deg) scale(1.25);
        }
        
        /* ===== NOTIFICACIÓN (TOAST) MEJORADA ===== */
        #toast-notification {
            background: linear-gradient(135deg, var(--accent-green), #2ecc71);
            color: white;
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px -5px rgba(39, 174, 96, 0.4), 0 8px 10px -6px rgba(39, 174, 96, 0.3);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform: translateY(20px) scale(0.9);
            opacity: 0;
        }
        #toast-notification.show {
            transform: translateY(0) scale(1);
            opacity: 1;
        }
        
        /* ===== CHATBOT (Sin cambios, ya estaba bien) ===== */
        .chatbot-container { position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
        .chatbot-header { background-color: var(--primary); color: white; }
        .chatbot-close-btn { color: white; }
        .chatbot-message { background-color: #f0f0f0; border-radius: 12px; padding: 10px 15px; margin-bottom: 10px; max-width: 80%; word-wrap: break-word; }
        .chatbot-message.bot { background-color: var(--primary-dark); color: white; }
        .chatbot-message.user { background-color: var(--accent-orange); color: white; align-self: flex-end; }
        .chatbot-input-area { background-color: #f7f7f7; border-top: 1px solid var(--border); }
        .chatbot-btn { background-color: var(--primary); color: white; }

        /* ===== NUEVAS ANIMACIONES PRO ===== */
        /* Animación de subrayado para el menú */
        .nav-link {
            position: relative;
            padding-bottom: 4px;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 100%;
            transform: scaleX(0);
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: var(--primary);
            transform-origin: bottom right;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .nav-link:hover::after {
            transform: scaleX(1);
            transform-origin: bottom left;
        }

        /* Tarjeta de Muebles Empoderada */
        .service-card-wood {
            position: relative;
            overflow: hidden;
            background: linear-gradient(145deg, #f0fff4, #e6f7f1);
        }
        .service-card-wood .service-icon {
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .service-card-wood:hover .service-icon {
            transform: translateY(-8px) scale(1.1);
        }
        .service-card-wood::before {
            content: '';
            position: absolute;
            top: 0; left: -150%;
            width: 100%; height: 100%;
            background: linear-gradient(to right, transparent 0%, rgba(255, 255, 255, 0.5) 50%, transparent 100%);
            transform: skewX(-25deg);
            transition: left 0.8s ease;
        }
        .service-card-wood:hover::before {
            left: 150%;
        }

    </style>
</head>
<body class="antialiased">

    <!-- ====== Header ====== -->
    <header class="bg-surface/80 backdrop-blur-xl shadow-sm sticky top-0 z-50 transition-all duration-300">
        <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <a href="#" class="flex items-center space-x-3">
                    <img src="logo-dcore.jpg" alt="Logotipo de D'CORE en Ecuador" class="h-12 md:h-14 w-auto rounded-full shadow-lg">
                    <span class="font-serif text-3xl font-bold tracking-wider text-text-dark">D'CORE</span>
                </a>
                <nav class="hidden md:flex space-x-10 items-center font-medium text-sm tracking-widest uppercase">
                    <a href="#legado" class="nav-link text-text-dark hover:text-primary">Legado</a>
                    <a href="#creaciones" class="nav-link text-text-dark hover:text-primary">Creaciones</a>
                    <a href="#servicios" class="nav-link text-text-dark hover:text-primary">Servicios</a>
                    <a href="#galeria" class="nav-link text-text-dark hover:text-primary">Galería</a>
                    <a href="#testimonios" class="nav-link text-text-dark hover:text-primary">Testimonios</a>
                </nav>
                <div class="flex items-center space-x-4">
                    <div id="cart-icon" class="relative cursor-pointer p-2 rounded-full bg-primary/10 hover:bg-primary/20 transform hover:scale-110 transition-all">
                        <svg class="w-7 h-7 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.944.693 1.944H17.5a2.25 2.25 0 002.25-2.25v-2.25"></path></svg>
                        <span id="cart-count" class="absolute -top-1 -right-1 bg-primary text-text-dark text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold hidden">0</span>
                    </div>
                    <button id="mobile-menu-button" class="md:hidden p-2">
                        <svg class="w-6 h-6 text-text-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                    </button>
                </div>
            </div>
            <div id="mobile-menu" class="hidden md:hidden pb-4">
                <a href="#legado" class="block text-center py-2 text-text-dark hover:text-primary transition-colors">Legado</a>
                <a href="#creaciones" class="block text-center py-2 text-text-dark hover:text-primary transition-colors">Creaciones</a>
                <a href="#servicios" class="block text-center py-2 text-text-dark hover:text-primary transition-colors">Servicios</a>
                <a href="#galeria" class="block text-center py-2 text-text-dark hover:text-primary transition-colors">Galería</a>
                <a href="#testimonios" class="block text-center py-2 text-text-dark hover:text-primary transition-colors">Testimonios</a>
            </div>
        </div>
    </header>

    <main>
        <!-- ====== Hero Section ====== -->
        <section class="text-center py-24 md:py-48 px-4 bg-background relative overflow-hidden">
            <div class="max-w-5xl mx-auto relative">
                <div class="fade-in-up is-visible">
                    <h1 class="text-5xl md:text-8xl font-serif font-bold text-text-dark mb-6 leading-tight animated-title">El Arte de Regalar un Legado.</h1>
                    <p class="text-base md:text-xl text-text-dark mb-12 max-w-3xl mx-auto fade-in-up is-visible" style="animation-delay: 0.3s;">Cada pieza es una historia. Un legado hecho a mano, destinado a perdurar. Ahora, tú eres parte de esta historia.</p>
                    <a href="#creaciones" class="relative inline-block px-10 py-4 text-lg font-bold uppercase tracking-widest rounded-full group bg-primary text-white shadow-lg hover:shadow-2xl hover:bg-primary-dark fade-in-up is-visible transform hover:-translate-y-1.5" style="animation-delay: 0.5s;">
                        Explorar la Colección
                    </a>
                </div>
            </div>
        </section>

        <!-- ====== Legado ====== -->
        <section id="legado" class="py-24 md:py-32 overflow-hidden bg-surface">
            <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-20 items-center">
                <div class="space-y-6 md:order-2 fade-in-up bg-background p-8 lg:p-12 rounded-2xl shadow-lg">
                    <p class="tracking-widest text-accent-green uppercase font-semibold">Nuestra Historia</p>
                    <h2 class="text-4xl md:text-5xl font-serif font-bold text-text-dark leading-snug animated-title">Un Legado de Detalles del Corazón.</h2>
                    <div class="space-y-4 text-text-dark text-lg">
                        <p>La historia de D'CORE no empezó en un bazar, sino en los <strong class="text-primary">intercambios de nueve hermanos.</strong> Crecieron en un hogar donde los <strong class="text-primary">regalos no se compraban, se creaban.</strong></p>
                        <p>Este ritual se convirtió en el ADN familiar. La chispa se encendió cuando un amigo, conmovido, dijo: <em class="text-primary">“Tu regalo tiene un valor que el dinero no puede comprar”</em>. Esa frase transformó una tradición en una misión: <strong class="text-primary">compartir esa magia.</strong></p>
                    </div>
                </div>
                <div class="relative md:order-1 fade-in-up w-full max-w-md mx-auto md:max-w-none">
                    <div class="relative w-full overflow-hidden rounded-2xl shadow-2xl aspect-square cursor-grab active:cursor-grabbing">
                        <div id="history-carousel-track" class="flex carousel-track h-full">
                            <!-- Carousel slides will be inserted here -->
                        </div>
                    </div>
                    <button id="history-prev" class="absolute left-3 top-1/2 -translate-y-1/2 bg-white/70 text-text-dark p-2 rounded-full hover:bg-white transition shadow-md z-10 transform hover:scale-110"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
                    <button id="history-next" class="absolute right-3 top-1/2 -translate-y-1/2 bg-white/70 text-text-dark p-2 rounded-full hover:bg-white transition shadow-md z-10 transform hover:scale-110"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                </div>
            </div>
        </section>
        
        <!-- ====== Productos ====== -->
        <section id="creaciones" class="py-24 md:py-32 bg-background overflow-hidden">
            <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12 md:mb-20 fade-in-up">
                    <h2 class="text-4xl md:text-6xl font-serif font-bold text-text-dark animated-title">Creaciones con Alma</h2>
                    <p class="text-base md:text-lg text-center text-text-dark mt-6 max-w-2xl mx-auto">Cada pieza es una declaración de intenciones. Una obra de arte única para quienes valoran lo excepcional.</p>
                </div>
                <div id="product-list" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 md:gap-8">
                    <!-- Los productos se generarán aquí con JS -->
                </div>
            </div>
        </section>

        <!-- ====== Promoción con Temporizador ====== -->
        <section id="promocion-timer" class="py-24 bg-primary/10">
            <div class="max-w-4xl mx-auto px-4 text-center">
                <div class="bg-surface rounded-2xl p-8 lg:p-12 transform hover:scale-[1.02] gold-glow">
                    <p class="tracking-widest text-accent-green uppercase font-semibold">Oferta Especial</p>
                    <h2 class="text-4xl md:text-6xl font-serif font-bold text-text-dark mb-6 animated-title">Tu Creatividad Tiene Doble Recompensa</h2>
                    <p class="text-lg text-text-dark mb-8 max-w-2xl mx-auto">Al inscribirte en cualquiera de nuestros cursos, no solo te llevas la experiencia de crear con tus manos, sino que ¡recibirás un <strong class="text-primary">producto D'CORE sorpresa TOTALMENTE GRATIS!</strong> Es nuestra forma de celebrar tu pasión.</p>
                    <div class="flex justify-center items-center space-x-4 mb-10 promotional-badge">
                        <div class="text-center p-4 bg-primary rounded-lg text-text-dark font-bold min-w-[70px] shadow-lg">
                            <span id="days" class="block text-2xl md:text-4xl">00</span>
                            <span class="block text-xs md:text-sm uppercase text-text-dark/80">Días</span>
                        </div>
                        <div class="text-center p-4 bg-primary rounded-lg text-text-dark font-bold min-w-[70px] shadow-lg">
                            <span id="hours" class="block text-2xl md:text-4xl">00</span>
                            <span class="block text-xs md:text-sm uppercase text-text-dark/80">Horas</span>
                        </div>
                        <div class="text-center p-4 bg-primary rounded-lg text-text-dark font-bold min-w-[70px] shadow-lg">
                            <span id="minutes" class="block text-2xl md:text-4xl">00</span>
                            <span class="block text-xs md:text-sm uppercase text-text-dark/80">Min</span>
                        </div>
                        <div class="text-center p-4 bg-primary rounded-lg text-text-dark font-bold min-w-[70px] shadow-lg">
                            <span id="seconds" class="block text-2xl md:text-4xl">00</span>
                            <span class="block text-xs md:text-sm uppercase text-text-dark/80">Seg</span>
                        </div>
                    </div>
                    <button class="w-full md:w-auto relative inline-flex items-center justify-center px-8 py-3 text-lg font-bold uppercase tracking-widest overflow-hidden rounded-full group bg-accent-orange text-text-dark border-2 border-accent-orange hover:bg-orange-600 shadow-lg hover:scale-105 transform">
                        <span class="relative z-10">¡Aprovechar la Promoción!</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- ====== Servicios Exclusivos y Cursos ====== -->
        <section id="servicios" class="py-24 md:py-32 overflow-hidden bg-background">
            <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16 fade-in-up">
                    <p class="tracking-widest text-accent-green uppercase font-semibold">Servicios D'CORE</p>
                    <h2 class="text-4xl md:text-6xl font-serif font-bold text-text-dark leading-snug mt-2 animated-title">Más que un Regalo, una Experiencia</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                    <!-- Tarjeta de Creaciones a Medida -->
                    <div class="bg-surface p-8 rounded-2xl shadow-lg fade-in-up group hover:shadow-2xl flex flex-col items-center text-center transform hover:-translate-y-2">
                        <div class="bg-primary/10 text-primary rounded-full p-4 mb-4 group-hover:scale-110 transition-transform"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" /></svg></div>
                        <h3 class="text-3xl font-serif font-bold text-text-dark mb-4 animated-title">Crea Tu Regalo Inolvidable</h3>
                        <p class="text-text-dark mb-6 flex-grow">Convertimos tus ideas en una obra de arte. Permítenos ser tus manos para crear esa pieza que contará tu propia historia a través de nuestro proceso creativo.</p>
                        <a id="contact-amedida-btn" href="#" target="_blank" class="font-bold text-text-dark group-hover:text-primary">Iniciar mi Creación por WhatsApp <span aria-hidden="true" class="inline-block transition-transform group-hover:translate-x-1">→</span></a>
                    </div>
                    <!-- Tarjeta de Muebles a la Medida - ¡EMPODERADA! -->
                    <div class="service-card-wood p-8 rounded-2xl shadow-xl fade-in-up group flex flex-col items-center text-center transform hover:-translate-y-2 border-2 border-transparent hover:border-accent-green" style="animation-delay: 0.2s;">
                         <div class="service-icon bg-accent-green/10 text-accent-green rounded-full p-4 mb-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2a2 2 0 012-2m14 0V9a2 2 0 00-2-2H7a2 2 0 00-2 2v2m7-8h2m-2 0h-2m2 0a2 2 0 110 4m0-4a2 2 0 100 4m-2-4a2 2 0 110 4m0-4a2 2 0 100 4" /></svg></div>
                        <h3 class="text-3xl font-serif font-bold text-text-dark mb-4 animated-title">Muebles: Arte y Función</h3>
                        <p class="text-text-dark mb-6 flex-grow">El alma de tu hogar merece un diseño legendario. Como ebanistas, transformamos madera noble en piezas que definen tus espacios. Desde <strong class="text-accent-green">cocinas de autor que fusionan estética y funcionalidad,</strong> hasta <strong class="text-accent-green">mesas de comedor que se convierten en el corazón del hogar.</strong> Cada proyecto es una colaboración íntima para construir tus sueños en madera, un legado que perdurará por generaciones.</p>
                        <a id="contact-muebles-btn" href="#" target="_blank" class="font-bold text-text-dark group-hover:text-accent-green">Solicitar Presupuesto por WhatsApp <span aria-hidden="true" class="inline-block transition-transform group-hover:translate-x-1">→</span></a>
                    </div>
                </div>
            </div>
        </section>

        <!-- ====== Sección de Cursos y Talleres ====== -->
        <section id="cursos" class="py-24 md:py-32 bg-surface overflow-hidden">
            <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16 fade-in-up">
                    <p class="tracking-widest text-accent-orange uppercase font-semibold">Tú Eres el Creador</p>
                    <h2 class="text-4xl md:text-6xl font-serif font-bold text-text-dark leading-snug mt-2 animated-title">Cursos y Talleres D'CORE</h2>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8">
                    <!-- Taller Nivel Inicial de Bordado -->
                    <div class="bg-background rounded-xl p-6 shadow-lg transform hover:-translate-y-2 fade-in-up text-center flex flex-col items-center relative">
                        <div class="absolute top-0 right-0 -mt-3 -mr-3 bg-accent-orange text-text-dark text-xs font-bold px-3 py-1 rounded-full shadow-lg promotional-badge">¡Kit de Regalo!</div>
                        <img src="https://placehold.co/400x300/e67e22/ffffff?text=Bordado+Inicial" alt="Taller de bordado para principiantes" class="w-full h-auto rounded-lg mb-4 object-cover">
                        <h3 class="text-2xl font-serif font-bold text-text-dark mb-2 animated-title">Bordado de Muñecos</h3>
                        <p class="text-sm text-text-dark flex-grow mb-4">Aprende los fundamentos del bordado, técnicas básicas y a crear tu primer muñeco desde cero, llenándolo de personalidad.</p>
                        <p class="text-2xl font-bold text-primary mb-2">$50.00</p>
                        <div class="w-full mt-auto">
                            <button class="w-full bg-accent-orange text-text-dark py-2 rounded-full font-semibold text-sm hover:bg-orange-600">Más Info</button>
                        </div>
                    </div>
                    <!-- Bordado Creativo de Parejas -->
                    <div class="bg-background rounded-xl p-6 shadow-lg transform hover:-translate-y-2 fade-in-up text-center flex flex-col items-center relative" style="animation-delay: 0.1s;">
                         <div class="absolute top-0 right-0 -mt-3 -mr-3 bg-accent-orange text-text-dark text-xs font-bold px-3 py-1 rounded-full shadow-lg promotional-badge">¡Kit de Regalo!</div>
                        <img src="https://placehold.co/400x300/27ae60/ffffff?text=Bordado+Parejas" alt="Taller de bordado para parejas" class="w-full h-auto rounded-lg mb-4 object-cover">
                        <h3 class="text-2xl font-serif font-bold text-text-dark mb-2 animated-title">Bordado para Parejas</h3>
                        <p class="text-sm text-text-dark flex-grow mb-4">Un espacio terapéutico para crear juntos. Aprende a bordar un proyecto que represente su conexión. Una experiencia única y un regalo con alma.</p>
                        <p class="text-2xl font-bold text-primary mb-2">$75.00</p>
                        <div class="w-full mt-auto">
                            <button class="w-full bg-accent-orange text-text-dark py-2 rounded-full font-semibold text-sm hover:bg-orange-600">Más Info</button>
                        </div>
                    </div>
                    <!-- Taller de Corte de Madera -->
                    <div class="bg-background rounded-xl p-6 shadow-lg transform hover:-translate-y-2 fade-in-up text-center flex flex-col items-center relative" style="animation-delay: 0.2s;">
                         <div class="absolute top-0 right-0 -mt-3 -mr-3 bg-accent-orange text-text-dark text-xs font-bold px-3 py-1 rounded-full shadow-lg promotional-badge">¡Kit de Regalo!</div>
                        <img src="https://placehold.co/400x300/c0392b/ffffff?text=Taller+Madera" alt="Taller de corte y carpintería en madera" class="w-full h-auto rounded-lg mb-4 object-cover">
                        <h3 class="text-2xl font-serif font-bold text-text-dark mb-2 animated-title">Corte de Madera para Muebles</h3>
                        <p class="text-sm text-text-dark flex-grow mb-4">Un taller práctico para dominar las herramientas y técnicas de corte de madera, creando desde piezas decorativas hasta un pequeño mueble.</p>
                        <p class="text-2xl font-bold text-primary mb-2">$90.00</p>
                        <div class="w-full mt-auto">
                            <button class="w-full bg-accent-orange text-text-dark py-2 rounded-full font-semibold text-sm hover:bg-orange-600">Más Info</button>
                        </div>
                    </div>
                    <!-- Taller de Tejido 1-a-1 -->
                    <div class="bg-background rounded-xl p-6 shadow-lg transform hover:-translate-y-2 fade-in-up text-center flex flex-col items-center relative" style="animation-delay: 0.3s;">
                         <div class="absolute top-0 right-0 -mt-3 -mr-3 bg-accent-orange text-text-dark text-xs font-bold px-3 py-1 rounded-full shadow-lg promotional-badge">¡Kit de Regalo!</div>
                        <img src="https://placehold.co/400x300/2980b9/ffffff?text=Taller+Tejido+1a1" alt="Clase de tejido personalizada" class="w-full h-auto rounded-lg mb-4 object-cover">
                        <h3 class="text-2xl font-serif font-bold text-text-dark mb-2 animated-title">Clase Personalizada</h3>
                        <p class="text-sm text-text-dark flex-grow mb-4">Un espacio uno a uno para aprender técnicas de bordado o tejido de manera personalizada, perfecto para un regalo especial o un proyecto en específico.</p>
                        <p class="text-2xl font-bold text-primary mb-2">$60.00</p>
                        <div class="w-full mt-auto">
                            <button class="w-full bg-accent-orange text-text-dark py-2 rounded-full font-semibold text-sm hover:bg-orange-600">Más Info</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ====== Calendario de Fechas Especiales ====== -->
        <section id="calendario" class="py-24 md:py-32 bg-background overflow-hidden">
            <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16 fade-in-up">
                    <p class="tracking-widest text-accent-green uppercase font-semibold">Concierge de Regalos</p>
                    <h2 class="text-4xl md:text-6xl font-serif font-bold text-text-dark leading-snug mt-2 animated-title">No Olvides un Solo Detalle</h2>
                    <p class="text-lg text-text-dark mt-4 max-w-2xl mx-auto">Nuestro calendario te ayuda a recordar las fechas más importantes y a planificar tus regalos con anticipación.</p>
                </div>
                <div class="flex flex-col lg:flex-row gap-8 items-start">
                    <!-- Columna Izquierda: Calendario -->
                    <div class="w-full lg:w-1/2 fade-in-up">
                        <div class="bg-surface rounded-2xl shadow-lg p-6 md:p-8">
                            <div class="flex justify-between items-center mb-6">
                                <button id="prev-month-btn" class="text-text-dark hover:text-primary transition-colors p-2 rounded-full transform hover:scale-125"><i class="fas fa-chevron-left text-xl"></i></button>
                                <div class="text-center">
                                    <h3 id="current-month" class="text-3xl font-serif font-bold text-text-dark"></h3>
                                    <p id="current-year" class="text-text-dark"></p>
                                </div>
                                <button id="next-month-btn" class="text-text-dark hover:text-primary transition-colors p-2 rounded-full transform hover:scale-125"><i class="fas fa-chevron-right text-xl"></i></button>
                            </div>
                            <div class="grid grid-cols-7 text-center text-sm font-semibold text-text-dark mb-4">
                                <span class="text-primary">Dom</span><span>Lun</span><span>Mar</span><span>Mié</span><span>Jue</span><span>Vie</span><span>Sáb</span>
                            </div>
                            <div id="calendar-days" class="grid grid-cols-7 gap-1">
                                <!-- Días se renderizan aquí -->
                            </div>
                        </div>
                    </div>

                    <!-- Columna Derecha: Vista de Fechas y Agregar -->
                    <div class="w-full lg:w-1/2 flex flex-col gap-8">
                         <div class="bg-surface p-6 rounded-2xl shadow-lg fade-in-up flex-grow">
                            <h3 id="event-list-title" class="text-2xl font-serif font-bold text-text-dark mb-4 animated-title">Fechas de <span id="selected-month-text" class="text-primary">este mes</span></h3>
                            <ul id="event-list" class="space-y-4 text-text-dark">
                                <!-- Lista de fechas especiales se renderiza aquí -->
                            </ul>
                            <p id="no-events-message" class="text-text-dark text-center py-4 hidden">No hay eventos.</p>
                        </div>
                        <div class="bg-surface p-6 rounded-2xl shadow-lg fade-in-up">
                            <h3 class="text-2xl font-serif font-bold text-text-dark mb-4 animated-title">Agendar Mi Fecha Especial</h3>
                            <form id="add-event-form" class="space-y-4">
                                <input type="text" id="event-date-input" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary text-text-dark" placeholder="Selecciona un día en el calendario" readonly>
                                <input type="text" id="event-name-input" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary text-text-dark" placeholder="Nombre del evento" required>
                                <button type="submit" class="w-full bg-primary text-text-dark py-3 rounded-lg font-semibold hover:bg-primary-dark shadow-md hover:shadow-lg transform hover:-translate-y-1">Agendar Fecha</button>
                                <a id="whatsapp-event-btn" href="#" target="_blank" class="w-full bg-accent-green text-white py-3 rounded-lg font-semibold hover:bg-green-700 hidden text-center">Enviar Recordatorio por WhatsApp</a>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ====== Galería ====== -->
        <section id="galeria" class="py-24 md:py-32 overflow-hidden bg-surface">
            <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12 md:mb-20 fade-in-up">
                    <h2 class="text-4xl md:text-6xl font-serif font-bold text-text-dark animated-title">Galería de Inspiración</h2>
                    <p class="text-base md:text-lg text-center text-text-dark mt-6 max-w-2xl mx-auto">Visualiza cómo el alma de D'CORE puede habitar y transformar tus espacios más queridos.</p>
                </div>
                <div id="gallery-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <!-- Las imágenes de la galería se agregarán aquí -->
                </div>
            </div>
        </section>

        <!-- ====== Testimonios ====== -->
        <section id="testimonios" class="py-24 md:py-32 bg-background overflow-hidden">
            <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16 fade-in-up">
                    <p class="tracking-widest text-accent-green uppercase font-semibold">Nuestros Clientes</p>
                    <h2 class="text-4xl md:text-6xl font-serif font-bold text-text-dark leading-snug mt-2 animated-title">Legados que Inspiran Confianza</h2>
                </div>
                <!-- CAMBIO: Contenedor de carrusel para testimonios -->
                <div class="flex overflow-x-auto snap-x snap-mandatory scroll-smooth gap-6 lg:gap-8 pb-4 lg:grid lg:grid-cols-3 lg:overflow-visible lg:p-0 testimonials-carousel-container">
                    <!-- Testimonio 1 -->
                    <div class="flex-shrink-0 w-[90%] sm:w-[80%] lg:w-auto snap-center">
                        <div class="bg-surface p-8 rounded-2xl shadow-lg h-full flex flex-col transform hover:-translate-y-2">
                            <div class="flex items-center mb-4"><span class="text-yellow-400">★★★★★</span></div>
                            <p class="text-text-dark italic mb-4 flex-grow">"El retrato bordado que hicieron para el aniversario de mis padres fue más que un regalo, fue una obra de arte cargada de emoción. ¡La calidad y el detalle son insuperables!"</p>
                            <div>
                                <p class="font-bold text-text-dark">Sofía Almeida</p>
                                <p class="text-sm text-primary">Cuenca, Azuay</p>
                            </div>
                        </div>
                    </div>
                    <!-- Testimonio 2 -->
                    <div class="flex-shrink-0 w-[90%] sm:w-[80%] lg:w-auto snap-center">
                        <div class="bg-surface p-8 rounded-2xl shadow-lg h-full flex flex-col transform hover:-translate-y-2">
                            <div class="flex items-center mb-4"><span class="text-yellow-400">★★★★★</span></div>
                            <p class="text-text-dark italic mb-4 flex-grow">"¡Increíble servicio! Pedí una caja de madera personalizada para mi esposo y el equipo de D'CORE captó mi idea a la perfección. El envío a Guayaquil fue rápido y muy seguro."</p>
                            <div>
                                <p class="font-bold text-text-dark">Carlos Zambrano</p>
                                <p class="text-sm text-primary">Guayaquil, Guayas</p>
                            </div>
                        </div>
                    </div>
                    <!-- Testimonio 3 -->
                    <div class="flex-shrink-0 w-[90%] sm:w-[80%] lg:w-auto snap-center">
                        <div class="bg-surface p-8 rounded-2xl shadow-lg h-full flex flex-col transform hover:-translate-y-2">
                            <div class="flex items-center mb-4"><span class="text-yellow-400">★★★★★</span></div>
                            <p class="text-text-dark italic mb-4 flex-grow">"El amigurumi de alpaca es lo más tierno que he visto. Se nota el amor en cada puntada. Un detalle perfecto que me recuerda a mi tierra. ¡Totalmente recomendados!"</p>
                            <div>
                                <p class="font-bold text-text-dark">Isabella Viteri</p>
                                <p class="text-sm text-primary">Quito, Pichincha</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- ====== Entregas en Ecuador ====== -->
        <section id="envios" class="py-24 bg-primary/10">
             <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 text-center fade-in-up">
                <svg class="w-20 h-20 mx-auto text-primary mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10l2 2h8a1 1 0 001-1zM22 12h-4l-3-6H9"></path></svg>
                <h2 class="text-3xl md:text-4xl font-serif font-bold text-text-dark animated-title">Llegamos a todo el Ecuador</h2>
                <p class="text-text-dark text-lg mt-4 max-w-2xl mx-auto">Recibe la magia de D'CORE en la puerta de tu casa. Realizamos envíos seguros y garantizados a cada rincón del país.</p>
             </div>
        </section>
    </main>

    <!-- ====== Footer ====== -->
    <footer id="contacto" class="bg-text-dark text-white">
        <div class="max-w-screen-xl mx-auto py-16 md:py-20 px-4 sm:px-6 lg:px-8 text-center">
            <a href="#" class="flex justify-center items-center space-x-3 mb-6">
                <img src="logo-dcore.jpg" alt="Logotipo D'CORE al final de la página" class="h-14 w-auto rounded-full shadow-lg">
                <span class="font-serif text-3xl font-bold tracking-wider text-white animated-title">D'CORE</span>
            </a>
            <p class="font-serif font-bold text-lg md:text-xl mb-8 text-stone-300">Un legado de detalles del corazón.</p>
            <div class="mt-8 mb-12 flex justify-center space-x-8">
                <a href="https://www.instagram.com/_hannah.yanez/" target="_blank" class="text-stone-300 hover:text-white transition-transform duration-300 hover:scale-110" aria-label="Instagram"><i class="fab fa-instagram-square text-4xl"></i></a>
                <a href="https://wa.me/593987786632" target="_blank" class="text-stone-300 hover:text-white transition-transform duration-300 hover:scale-110" aria-label="WhatsApp"><i class="fab fa-whatsapp-square text-4xl"></i></a>
            </div>
            <div class="border-t border-stone-700 max-w-2xl mx-auto pt-8 mt-12">
                <p class="text-sm text-stone-500">Diseñado por <a href="https://www.goatify.app/web" target="_blank" class="text-stone-400 hover:text-primary underline transition-colors duration-300">Goatify IA</a> en colaboración con Hannah Yánez, fundadora de la marca.</p>
                <p class="text-sm text-stone-500 mt-2">&copy; 2025 D'CORE. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- ====== Modals & Toasts ====== -->
    <div id="cart-modal" class="fixed inset-0 bg-black/60 z-[100] hidden items-center justify-center p-4">
        <!-- Contenedor del contenido del modal con estilos mejorados -->
        <div class="modal-content w-full max-w-lg max-h-[85vh] flex flex-col opacity-0 transform scale-95 transition-all duration-300">
            <div class="flex justify-between items-center p-5 border-b border-border">
                <h2 class="text-2xl font-bold font-serif text-text-dark">Tu Carrito</h2>
                <button id="close-cart-btn" class="text-4xl text-text-dark hover:text-primary leading-none transition-colors transform hover:rotate-90">&times;</button>
            </div>
            <div id="cart-items" class="p-6 overflow-y-auto flex-grow"></div>
            <div class="p-6 border-t border-border bg-background rounded-b-xl">
                <div class="flex justify-between items-center text-xl font-bold mb-4 text-text-dark">
                    <span class="font-serif text-text-dark">Total:</span>
                    <span id="cart-total" class="text-text-dark">$0.00</span>
                </div>
                <button id="checkout-btn" class="w-full bg-primary text-white py-3 rounded-lg text-lg font-semibold hover:bg-primary-dark transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 disabled:bg-gray-400 disabled:text-gray-200 disabled:transform-none disabled:shadow-none">Finalizar Compra</button>
            </div>
        </div>
    </div>
    <div id="instructions-modal" class="fixed inset-0 bg-black/60 z-[110] hidden items-center justify-center p-4">
        <div class="bg-surface rounded-xl shadow-2xl p-8 text-center w-full max-w-md opacity-0 transform scale-95 transition-all duration-300">
            <h2 class="text-2xl font-bold font-serif mb-4 text-text-dark">¡Casi Listo!</h2>
            <p class="text-text-dark mb-6">Para completar tu pedido, envíanos el resumen. Hemos preparado el mensaje para ti.</p>
            <a id="whatsapp-checkout-link" href="#" target="_blank" class="block w-full bg-accent-green text-white py-3 rounded-lg text-lg font-semibold hover:bg-green-700 shadow-lg mb-3">Enviar por WhatsApp</a>
            <button id="copy-summary-btn" class="block w-full bg-gray-200 text-text-dark py-3 rounded-lg text-md font-semibold hover:bg-gray-300">Copiar Resumen</button>
            <button id="close-instructions-btn" class="mt-6 text-sm text-gray-400 hover:text-text-dark"><span class="text-text-dark">Cerrar</span></button>
        </div>
    </div>
    <!-- Notificación Toast con nuevo diseño -->
    <div id="toast-notification" class="fixed bottom-5 right-5 py-3 px-5 z-[120] flex items-center space-x-3">
        <i class="fas fa-check-circle text-lg"></i>
        <span id="toast-message" class="font-semibold"></span>
    </div>

    <!-- ====== Chatbot ====== -->
    <div class="chatbot-container">
        <button id="open-chatbot-btn" class="bg-primary text-white w-14 h-14 rounded-full shadow-2xl flex items-center justify-center text-2xl animate-bounce">
            <i class="fas fa-comment-dots"></i>
        </button>
        <div id="chatbot-modal" class="hidden absolute bottom-20 right-0 w-[90vw] max-w-md h-[70vh] max-h-[600px] bg-surface rounded-xl shadow-2xl flex flex-col transform scale-95 opacity-0 transition-all duration-300">
            <div class="chatbot-header p-4 rounded-t-xl flex justify-between items-center shadow-md">
                <h3 class="text-xl font-bold font-serif text-white">Asistente D'CORE</h3>
                <button id="close-chatbot-btn" class="text-2xl leading-none"><span class="text-white">&times;</span></button>
            </div>
            <div id="chatbot-body" class="p-4 flex-grow overflow-y-auto space-y-4">
                <!-- Mensajes del chatbot aquí -->
            </div>
            <div class="p-4 flex flex-col gap-2">
                <div id="quick-replies" class="flex flex-wrap gap-2">
                    <!-- Botones de respuestas rápidas aquí -->
                </div>
                <div class="chatbot-input-area flex items-center p-2 rounded-lg">
                    <input type="text" id="chatbot-input" class="flex-grow p-2 bg-transparent focus:outline-none text-text-dark placeholder-gray-500" placeholder="Escriba su mensaje...">
                    <button id="send-chatbot-btn" class="chatbot-btn w-10 h-10 rounded-full flex items-center justify-center ml-2">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        const WHATSAPP_NUMBER = '593987786632'; 
        
        // --- Productos y Galería ---
        const products = [
            { name: 'Amigurumi "Compañero Fiel"', price: 28.50, image: 'IMG-20250830-WA0020.jpg', description: "Un tierno amigo tejido a mano, perfecto para abrazar o decorar. Cada puntada está llena de cariño y dedicación." },
            { name: 'Tapiz "Sol de Montaña"', price: 65.00, image: 'IMG-20250830-WA0021.jpg', description: "Un tapiz de macramé y lana que representa la conexión con la naturaleza. Ideal para dar calidez a cualquier espacio." },
            { name: 'Bordado "Nido de Amor"', price: 38.00, image: 'IMG-20250830-WA0022.jpg', discount: 15, description: "Un bordado delicado que captura la esencia del hogar y el amor. Un detalle único y emotivo para parejas." },
            { name: 'Cuenco "Corazón de Árbol"', price: 52.00, image: 'IMG-20250830-WA0023.jpg', description: "Un cuenco de madera tallado a mano, con un diseño rústico y elegante. Perfecto para guardar tus tesoros más preciados." },
            { name: 'Llavero "Abrazo de Alpaca"', price: 15.00, image: 'IMG-20250830-WA0024.jpg', description: "Un llavero de lana en forma de alpaca, un recordatorio de nuestra tierra y un toque de ternura para tu día a día." },
            { name: 'Caja "Guardián de Secretos"', price: 88.00, image: 'IMG-20250830-WA0025.jpg', description: "Una caja de madera con intrincados grabados, ideal para proteger y guardar recuerdos. Un objeto con alma y propósito." },
            { name: 'Posavasos "Círculo de Amigos"', price: 45.00, image: 'IMG-20250830-WA0026.jpg', discount: 10, description: "Un set de posavasos tejidos a mano, cada uno con un diseño único. Perfectos para compartir un café o una historia con amigos." },
            { name: 'Móvil "Sueños de Cuna"', price: 72.50, image: 'IMG-20250830-WA0027.jpg', description: "Un móvil de macramé y madera para bebés, que inspira tranquilidad y creatividad. Un regalo que acompañará sus sueños." },
            { name: 'Retrato Bordado "Tu Historia"', price: 95.00, image: 'IMG-20250830-WA0028.jpg', description: "Un retrato personalizado a partir de una foto, bordado con los más finos hilos. Un tesoro familiar que se convertirá en un legado." },
            { name: 'Muñeca de Trapo "Alma Gemela"', price: 42.00, image: 'IMG-20250830-WA0029.jpg', discount: 20, description: "Una muñeca de trapo hecha a mano, con su propio estilo y personalidad. Un regalo que evoca la inocencia y la imaginación." },
            { name: 'Tabla de Picar "El Festín"', price: 58.00, image: 'IMG-20250830-WA0030.jpg', description: "Una tabla de madera funcional y decorativa. Con un diseño elegante y duradero, ideal para tus reuniones o como pieza decorativa." },
            { name: 'Juguete de Madera "Aventura"', price: 35.00, image: 'IMG-20250830-WA0031.jpg', description: "Un juguete de madera natural, seguro y duradero, que estimula la imaginación y el juego creativo. Un regalo clásico para los más pequeños." },
            { name: 'Colgante "Espíritu Libre"', price: 22.00, image: 'IMG-20250830-WA0032.jpg', description: "Un delicado colgante tejido con hilos de colores. Un accesorio que combina tradición y modernidad, perfecto para el día a día." },
            { name: 'Camiseta Pintada "Mi Universo"', price: 48.00, image: 'IMG-20250830-WA0033.jpg', description: "Una camiseta de algodón pintada a mano con un diseño original. Lleva tu historia y tu estilo a todas partes." },
            { name: 'Set de Cucharas "Sabor a Hogar"', price: 40.00, image: 'IMG-20250830-WA0034.jpg', description: "Un set de cucharas de madera talladas y decoradas a mano. Un toque rústico y cálido para tu cocina." },
            { name: 'Macetero de Macramé "Vida"', price: 33.00, image: 'IMG-20250830-WA0035.jpg', description: "Un macetero de macramé para dar vida a tus espacios. Resalta la belleza de tus plantas con este diseño artesanal." },
            { name: 'Adorno de Pared "Mandala"', price: 55.00, image: 'IMG-20250830-WA0036.jpg', description: "Un adorno de pared circular con un diseño de mandala. Un punto focal que atrae la buena energía a cualquier habitación." },
            { name: 'Alcancía "Sueños Guardados"', price: 30.00, image: 'IMG-20250830-WA0037.jpg', description: "Una alcancía de madera con un diseño creativo para guardar tus ahorros. El primer paso para hacer realidad tus sueños." },
            { name: 'Reloj de Pared "Tiempo de Amar"', price: 75.00, image: 'IMG-20250830-WA0038.jpg', discount: 25, description: "Un reloj de pared artesanal, un recordatorio de que cada segundo cuenta para amar. Un regalo significativo y decorativo." },
            { name: 'Llavero Metálico "Destino"', price: 18.00, image: 'IMG-20250830-WA0039.jpg', description: "Un llavero metálico con un grabado personalizado. Un detalle que siempre te recordará a esa persona especial." },
            { name: 'Muñeca de Lana "Sonrisas"', price: 29.00, image: 'IMG-20250830-WA0040.jpg', description: "Una muñeca de lana suave y colorida, un compañero de juegos ideal para niños. Hecha con materiales hipoalergénicos." },
            { name: 'Frasco Decorativo "Esencia"', price: 20.00, image: 'IMG-20250830-WA0041.jpg', description: "Un frasco de vidrio decorado a mano, perfecto para guardar pequeños objetos o como un elemento de decoración único." },
            { name: 'Bolso "Caminos Cruzados"', price: 45.00, image: 'IMG-20250830-WA0042.jpg', description: "Un bolso de tela resistente con un diseño de caminos. Ideal para el uso diario, ir de compras o llevar tus cosas con estilo." },
            { name: 'Bolsa de Tela "Mercado de Ideas"', price: 25.00, image: 'IMG-20250830-WA0043.jpg', description: "Una bolsa de tela reutilizable, con un diseño original. Llévala contigo y reduce el uso de bolsas plásticas." },
            { name: 'Marco de Fotos "Instantes"', price: 32.00, image: 'IMG-20250830-WA0044.jpg', description: "Un marco de madera tallado a mano, para enmarcar tus recuerdos más preciados. Un regalo que perdura en el tiempo." },
            { name: 'Amigurumi "Pequeño Gigante"', price: 28.00, image: 'IMG-20250830-WA0045.jpg', description: "Un amigurumi con un tamaño ideal para decorar o jugar. Un compañero que traerá alegría a cualquier rincón." },
            { name: 'Prenda Bordada "Hilos de Vida"', price: 60.00, image: 'IMG-20250830-WA0046.jpg', description: "Una prenda de vestir con un bordado personalizado. Una obra de arte que puedes usar y llevar contigo." }
        ];

        const galleryImages = [
            {img: 'IMG-20250830-WA0036.jpg', alt: "Mandala tejido a mano colgado en la pared"},
            {img: 'IMG-20250830-WA0037.jpg', alt: "Alcancía de madera personalizada"},
            {img: 'IMG-20250830-WA0038.jpg', alt: "Reloj de pared artesanal de D'CORE"},
            {img: 'IMG-20250830-WA0039.jpg', alt: "Llavero metálico con diseño exclusivo"},
            {img: 'IMG-20250830-WA0040.jpg', alt: "Muñeca de lana sonriente hecha a mano"},
            {img: 'IMG-20250830-WA0041.jpg', alt: "Frasco decorativo con detalles artesanales"},
            {img: 'IMG-20250830-WA0042.jpg', alt: "Bolso de tela con diseño de caminos cruzados"},
            {img: 'IMG-20250830-WA0043.jpg', alt: "Bolsa de tela para mercado con diseño de D'CORE"},
        ];

        // --- Mensajes de WhatsApp Personalizados ---
        document.getElementById('contact-amedida-btn').href = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent("¡Hola D'CORE! Estoy interesado en el servicio de creaciones a medida. Me gustaría empezar a diseñar mi regalo inolvidable.")}`;
        document.getElementById('contact-muebles-btn').href = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent("¡Hola D'CORE! Me gustaría solicitar un presupuesto para un mueble o creación de madera a la medida. ¿Podemos hablar de mi idea?")}`;
        
        // --- Renderizar Productos ---
        const productList = document.getElementById('product-list');
        productList.innerHTML = products.map((p, i) => {
            let priceHTML = `<p class="text-2xl font-bold text-text-dark">$${p.price.toFixed(2)}</p>`;
            let saleBadge = '';
            if (p.discount) {
                const newPrice = p.price * (1 - p.discount / 100);
                priceHTML = `<p class="text-2xl font-bold text-accent-green">$${newPrice.toFixed(2)} <span class="text-base font-normal text-text-light line-through ml-2">$${p.price.toFixed(2)}</span></p>`;
                saleBadge = `<div class="absolute top-3 right-3 bg-primary text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-lg">-${p.discount}%</div>`;
            }
            return `
                <div class="group product-card fade-in-up relative overflow-hidden rounded-xl shadow-lg bg-surface hover:shadow-2xl hover:-translate-y-2" data-name="${p.name}" data-price="${p.price}" data-image="${p.image}" ${p.discount ? `data-discount="${p.discount}"` : ''} style="animation-delay: ${i * 0.05}s;">
                    <img src="${p.image}" alt="${p.name}" class="w-full h-72 object-cover rounded-t-xl group-hover:scale-110">
                    ${saleBadge}
                    <div class="p-4 flex flex-col items-center text-center">
                        <h3 class="text-2xl font-serif font-bold text-text-dark mb-1 truncate w-full">${p.name}</h3>
                        ${priceHTML}
                        <button class="add-to-cart-btn mt-4 w-full bg-primary text-text-dark py-2 px-6 rounded-full hover:bg-primary-dark font-semibold text-sm shadow-md hover:shadow-lg transform hover:-translate-y-1">
                            Añadir al Carrito
                        </button>
                    </div>
                </div>
            `;
        }).join('');

        // --- Renderizar Galería ---
        const galleryGrid = document.getElementById('gallery-grid');
        let galleryHTML = '';
        for (let i = 0; i < 4; i++) {
            galleryHTML += '<div class="grid gap-4">';
            galleryHTML += `<div class="overflow-hidden rounded-lg shadow-lg fade-in-up" style="animation-delay: ${i * 0.1}s;"><img class="h-auto w-full hover:scale-110" src="${galleryImages[i].img}" alt="${galleryImages[i].alt}"></div>`;
            galleryHTML += `<div class="overflow-hidden rounded-lg shadow-lg fade-in-up" style="animation-delay: ${(i + 4) * 0.1}s;"><img class="h-auto w-full hover:scale-110" src="${galleryImages[i+4].img}" alt="${galleryImages[i+4].alt}"></div>`;
            galleryHTML += '</div>';
        }
        galleryGrid.innerHTML = galleryHTML;

        // --- LÓGICA DEL CARRITO (CON MEJORAS VISUALES) ---
        const cartIcon = document.getElementById('cart-icon'), cartModal = document.getElementById('cart-modal'), closeCartBtn = document.getElementById('close-cart-btn'), instructionsModal = document.getElementById('instructions-modal'), closeInstructionsBtn = document.getElementById('close-instructions-btn'), copySummaryBtn = document.getElementById('copy-summary-btn'), cartItemsContainer = document.getElementById('cart-items'), cartCountElement = document.getElementById('cart-count'), cartTotalElement = document.getElementById('cart-total'), checkoutBtn = document.getElementById('checkout-btn'), toast = document.getElementById('toast-notification'), toastMessage = document.getElementById('toast-message');
        
        let cart = JSON.parse(localStorage.getItem('dcoreCartV10')) || [];
        
        const saveCart = () => localStorage.setItem('dcoreCartV10', JSON.stringify(cart));
        
        const updateCartUI = () => {
            cartItemsContainer.innerHTML = '';
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-text-dark text-center py-8">Tu carrito está vacío.</p>';
                checkoutBtn.disabled = true;
            } else {
                cart.forEach((item, index) => {
                    const itemEl = document.createElement('div');
                    itemEl.className = 'flex items-center mb-4 border-b border-border pb-4 last:border-b-0 last:pb-0';
                    itemEl.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="w-20 h-20 object-cover rounded-lg mr-4">
                        <div class="flex-grow">
                            <p class="font-bold text-lg text-text-dark">${item.name}</p>
                            <p class="text-sm text-text-dark">$${item.currentPrice.toFixed(2)}</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="quantity-change" data-index="${index}" data-change="-1">-</button>
                            <span class="w-8 text-center font-bold text-lg text-text-dark">${item.quantity}</span>
                            <button class="quantity-change" data-index="${index}" data-change="1">+</button>
                        </div>
                        <button class="remove-item text-gray-400 text-2xl ml-4" data-index="${index}">&times;</button>
                    `;
                    cartItemsContainer.appendChild(itemEl);
                });
                checkoutBtn.disabled = false;
            }
            const total = cart.reduce((sum, item) => sum + item.currentPrice * item.quantity, 0);
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartTotalElement.textContent = `$${total.toFixed(2)}`;
            cartCountElement.textContent = count;
            cartCountElement.classList.toggle('hidden', count === 0);
            saveCart();
        };

        let toastTimeout;
        const showToast = (message) => {
            clearTimeout(toastTimeout);
            toastMessage.textContent = message;
            toast.classList.add('show');
            toastTimeout = setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        };
        
        const openModal = (modal) => {
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            setTimeout(() => modal.children[0].classList.remove('opacity-0', 'scale-95'), 10);
            document.body.style.overflow = 'hidden';
        };

        const closeModal = (modal) => {
            modal.children[0].classList.add('opacity-0', 'scale-95');
            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                document.body.style.overflow = 'auto';
            }, 300);
        };
        
        const generateOrderSummary = () => {
            let message = "¡Hola D'CORE! 👋 Me gustaría realizar el siguiente pedido:\n\n";
            cart.forEach(item => {
                message += `*${item.quantity}x* - ${item.name} - $${(item.currentPrice * item.quantity).toFixed(2)}\n`;
            });
            const total = cart.reduce((sum, item) => sum + item.currentPrice * item.quantity, 0);
            message += `\n*Total a pagar: $${total.toFixed(2)}*`;
            message += "\n\nQuedo a la espera de los detalles para el pago y envío. ¡Gracias! 😊";
            return { message };
        };

        document.getElementById('product-list').addEventListener('click', e => {
            const btn = e.target.closest('.add-to-cart-btn');
            if (btn) {
                const card = btn.closest('.product-card');
                const name = card.dataset.name;
                const price = parseFloat(card.dataset.price);
                const discount = card.dataset.discount ? parseFloat(card.dataset.discount) : 0;
                const image = card.dataset.image;
                
                const currentPrice = discount > 0 ? price * (1 - discount / 100) : price;

                const existingItem = cart.find(item => item.name === name);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ name, price, currentPrice, image, quantity: 1 });
                }
                updateCartUI();
                showToast(`"${name}" añadido a tu carrito.`);
            }
        });

        cartItemsContainer.addEventListener('click', e => {
            const btn = e.target.closest('button');
            if (!btn) return;
            const index = parseInt(btn.dataset.index);
            if (btn.matches('.quantity-change')) {
                cart[index].quantity += parseInt(btn.dataset.change);
                if (cart[index].quantity <= 0) cart.splice(index, 1);
            } else if (btn.matches('.remove-item')) {
                cart.splice(index, 1);
            }
            updateCartUI();
        });

        cartIcon.addEventListener('click', () => openModal(cartModal));
        closeCartBtn.addEventListener('click', () => closeModal(cartModal));
        cartModal.addEventListener('click', e => e.target === cartModal && closeModal(cartModal));

        checkoutBtn.addEventListener('click', () => {
            if (cart.length > 0) {
                document.getElementById('whatsapp-checkout-link').href = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(generateOrderSummary().message)}`;
                closeModal(cartModal);
                openModal(instructionsModal);
            }
        });

        copySummaryBtn.addEventListener('click', () => navigator.clipboard.writeText(generateOrderSummary().message).then(() => showToast('¡Resumen copiado!')));
        closeInstructionsBtn.addEventListener('click', () => closeModal(instructionsModal));
        instructionsModal.addEventListener('click', e => e.target === instructionsModal && closeModal(instructionsModal));
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.fade-in-up').forEach(el => observer.observe(el));
        
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // --- LÓGICA DEL CARRUSEL DE HISTORIA ---
        const historyCarouselTrack = document.getElementById('history-carousel-track');
        const historyImages = products.slice(0, 10).map(p => p.image);
        historyCarouselTrack.innerHTML = historyImages.map(img => `
            <div class="min-w-full h-full flex-shrink-0">
                <img src="${img}" alt="Imagen de creaciones D'CORE en el carrusel de historia" class="w-full h-full object-cover" draggable="false">
            </div>
        `).join('');
        
        let historyCurrentSlide = 0;
        const historySlides = historyCarouselTrack.children;
        const historyNextBtn = document.getElementById('history-next');
        const historyPrevBtn = document.getElementById('history-prev');

        const updateHistoryCarousel = () => {
            if (historySlides.length > 0) {
                   historyCarouselTrack.style.transform = `translateX(-${historyCurrentSlide * 100}%)`;
            }
        };

        historyNextBtn.addEventListener('click', () => {
            historyCurrentSlide = (historyCurrentSlide + 1) % historySlides.length;
            updateHistoryCarousel();
        });

        historyPrevBtn.addEventListener('click', () => {
            historyCurrentSlide = (historyCurrentSlide - 1 + historySlides.length) % historySlides.length;
            updateHistoryCarousel();
        });
        
        let autoSlideInterval = setInterval(() => { historyNextBtn.click(); }, 4000);
        const carouselContainer = historyCarouselTrack.parentElement.parentElement;
        carouselContainer.addEventListener('mouseenter', () => clearInterval(autoSlideInterval));
        carouselContainer.addEventListener('mouseleave', () => {
            autoSlideInterval = setInterval(() => { historyNextBtn.click(); }, 4000);
        });

        // --- LÓGICA DEL CALENDARIO ---
        const calendarDays = document.getElementById('calendar-days');
        const currentMonthEl = document.getElementById('current-month');
        const currentYearEl = document.getElementById('current-year');
        const prevMonthBtn = document.getElementById('prev-month-btn');
        const nextMonthBtn = document.getElementById('next-month-btn');
        const eventDateInput = document.getElementById('event-date-input');
        const eventNameInput = document.getElementById('event-name-input');
        const addEventForm = document.getElementById('add-event-form');
        const eventListEl = document.getElementById('event-list');
        const eventListTitle = document.getElementById('event-list-title');
        const noEventsMessageEl = document.getElementById('no-events-message');
        const selectedMonthTextEl = document.getElementById('selected-month-text');
        
        let today = new Date();
        let currentMonth = 8; // 8 = Septiembre
        let currentYear = today.getFullYear();
        let selectedDate = null;
        
        const specialDates = {
            '01-01': 'Año Nuevo', '01-06': 'Día de Reyes',
            '02-14': 'Día de San Valentín',
            '03-08': 'Día Internacional de la Mujer',
            '04-22': 'Día de la Tierra', '04-23': 'Día del Libro',
            '05-01': 'Día del Trabajo', '05-10': 'Día de la Madre (Ecuador)',
            '06-16': 'Día del Padre (Ecuador)',
            '08-10': 'Primer Grito de Independencia',
            '09-21': 'Día Internacional de la Paz', '09-27': 'Día Mundial del Turismo',
            '10-09': 'Independencia de Guayaquil', '10-31': 'Halloween',
            '11-02': 'Día de los Difuntos', '11-03': 'Independencia de Cuenca',
            '12-06': 'Fundación de Quito', '12-24': 'Nochebuena', '12-25': 'Navidad', '12-31': 'Nochevieja'
        };

        const renderMonthEvents = (month, year) => {
            eventListTitle.innerHTML = `Fechas de <span class="text-primary">${new Date(year, month).toLocaleString('es-ES', { month: 'long' })}</span>`;
            eventListEl.innerHTML = '';
            noEventsMessageEl.classList.add('hidden');
            const allEvents = JSON.parse(localStorage.getItem('dcoreEvents')) || [];
            let monthEvents = [];
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            for (let i = 1; i <= daysInMonth; i++) {
                const date = new Date(year, month, i);
                const day = String(i).padStart(2, '0');
                const monthStr = String(month + 1).padStart(2, '0');
                const formattedDate = `${monthStr}-${day}`;
                
                if (specialDates[formattedDate]) {
                    monthEvents.push({ date: date, name: specialDates[formattedDate], type: 'special' });
                }
                const clientEventsOnDay = allEvents.filter(event => new Date(event.date).toDateString() === date.toDateString());
                monthEvents.push(...clientEventsOnDay);
            }
            
            if (monthEvents.length === 0) {
                noEventsMessageEl.textContent = "No hay eventos agendados para este mes.";
                noEventsMessageEl.classList.remove('hidden');
            } else {
                monthEvents.forEach(event => {
                    const eventDate = new Date(event.date);
                    const eventItem = document.createElement('li');
                    eventItem.className = 'flex items-center space-x-3 p-3 rounded-lg bg-gray-100';
                    eventItem.innerHTML = `
                        <div class="flex flex-col items-center justify-center w-12 text-center">
                            <span class="font-bold text-primary text-lg">${eventDate.getDate()}</span>
                            <span class="text-xs capitalize">${eventDate.toLocaleString('es-ES', { weekday: 'short' })}</span>
                        </div>
                        <p class="flex-grow text-text-dark">${event.name}</p>
                    `;
                    eventListEl.appendChild(eventItem);
                });
            }
        };

        const renderDayEvents = (date) => {
            eventListTitle.innerHTML = `Fechas del <span class="text-primary">${date.toLocaleDateString('es-ES', {day: 'numeric', month: 'long'})}</span>`;
            eventListEl.innerHTML = '';
            const allEvents = JSON.parse(localStorage.getItem('dcoreEvents')) || [];
            
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const formattedDate = `${month}-${day}`;
            
            let foundEvents = [];
            if (specialDates[formattedDate]) {
                foundEvents.push({ name: specialDates[formattedDate], type: 'special' });
            }
            const clientEvents = allEvents.filter(event => new Date(event.date).toDateString() === date.toDateString());
            foundEvents.push(...clientEvents);

            if (foundEvents.length === 0) {
                noEventsMessageEl.textContent = "No hay eventos en este día.";
                noEventsMessageEl.classList.remove('hidden');
            } else {
                noEventsMessageEl.classList.add('hidden');
                foundEvents.forEach((event) => {
                    const eventItem = document.createElement('li');
                    eventItem.className = 'flex items-center space-x-3 p-3 rounded-lg bg-gray-100';
                    eventItem.innerHTML = `<i class="fas fa-calendar-check text-accent-green"></i>
                        <p class="flex-grow text-text-dark">${event.name}</p>
                    `;
                    eventListEl.appendChild(eventItem);
                });
            }
        };

        const renderCalendar = () => {
            calendarDays.innerHTML = '';
            const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            
            currentMonthEl.textContent = new Date(currentYear, currentMonth).toLocaleString('es-ES', { month: 'long' });
            currentYearEl.textContent = currentYear;

            for (let i = 0; i < firstDayOfMonth; i++) { calendarDays.appendChild(document.createElement('div')); }

            for (let i = 1; i <= daysInMonth; i++) {
                const dayEl = document.createElement('div');
                dayEl.classList.add('w-full', 'aspect-square', 'flex', 'items-center', 'justify-center', 'rounded-lg', 'cursor-pointer', 'p-1', 'transition-colors', 'duration-200');
                const day = String(i).padStart(2, '0');
                const month = String(currentMonth + 1).padStart(2, '0');
                const formattedDate = `${month}-${day}`;
                let hasEvent = specialDates[formattedDate] || JSON.parse(localStorage.getItem('dcoreEvents'))?.some(event => new Date(event.date).toDateString() === new Date(currentYear, currentMonth, i).toDateString());

                if (hasEvent) {
                    dayEl.classList.add('bg-accent-green/20', 'hover:bg-accent-green/40', 'relative');
                    dayEl.innerHTML = `<span class="text-text-dark font-bold">${i}</span><span class="absolute top-1 right-1 w-2 h-2 rounded-full bg-accent-green"></span>`;
                } else {
                    dayEl.classList.add('hover:bg-gray-200');
                    dayEl.innerHTML = `<span class="text-text-dark">${i}</span>`;
                }
                
                if (today.getDate() === i && today.getMonth() === currentMonth && today.getFullYear() === currentYear) {
                    dayEl.classList.add('bg-primary/20', 'ring-2', 'ring-primary');
                }
                
                dayEl.addEventListener('click', () => {
                    document.querySelectorAll('#calendar-days > div.bg-primary').forEach(d => d.classList.remove('bg-primary', 'text-white'));
                    dayEl.classList.add('bg-primary', 'text-white');
                    dayEl.querySelector('span').classList.add('!text-white');
                    selectedDate = new Date(currentYear, currentMonth, i);
                    eventDateInput.value = selectedDate.toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' });
                    renderDayEvents(selectedDate);
                });
                calendarDays.appendChild(dayEl);
            }
            renderMonthEvents(currentMonth, currentYear);
        };

        addEventForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (!selectedDate) {
                showToast('Por favor, seleccione un día del calendario.');
                return;
            }
            const eventName = eventNameInput.value.trim();
            if (eventName) {
                const allEvents = JSON.parse(localStorage.getItem('dcoreEvents')) || [];
                allEvents.push({ name: eventName, date: selectedDate.toISOString(), type: 'client' });
                localStorage.setItem('dcoreEvents', JSON.stringify(allEvents));
                eventNameInput.value = '';
                showToast('¡Fecha agendada con éxito!');
                renderCalendar();
            } else {
                showToast('Por favor, ingrese un nombre para el evento.');
            }
        });

        prevMonthBtn.addEventListener('click', () => {
            currentMonth--;
            if (currentMonth < 0) { currentMonth = 11; currentYear--; }
            renderCalendar();
        });

        nextMonthBtn.addEventListener('click', () => {
            currentMonth++;
            if (currentMonth > 11) { currentMonth = 0; currentYear++; }
            renderCalendar();
        });

        // --- Lógica del Chatbot ---
        const chatbotBtn = document.getElementById('open-chatbot-btn');
        const chatbotModal = document.getElementById('chatbot-modal');
        const closeChatbotBtn = document.getElementById('close-chatbot-btn');
        const chatbotBody = document.getElementById('chatbot-body');
        const chatbotInput = document.getElementById('chatbot-input');
        const sendChatbotBtn = document.getElementById('send-chatbot-btn');
        const quickReplies = document.getElementById('quick-replies');

        const chatbotData = {
            greetings: ["¡Hola! Le damos la bienvenida a D'CORE. Soy su asistente virtual y estoy aquí para ayudarle con cualquier pregunta que tenga sobre nuestros productos y servicios. ¿Cómo le puedo ayudar hoy?", "¿En qué podemos servirle? Estamos listos para asistirle con cualquier duda que tenga.", "Saludos cordiales. Soy su asistente personal. Estoy a su disposición para guiarle en su experiencia D'CORE."],
            faq: {
                "productos": {
                    answer: "Nuestras creaciones son piezas de alta artesanía, hechas a mano con dedicación. Contamos con una amplia variedad de productos únicos, como amigurumis, tapices, bordados, y artículos de madera. ¿Le gustaría saber más sobre una categoría específica?",
                    buttons: ["Amigurumis y Tejidos", "Artesanía en Madera", "Bordados Personalizados", "Ver todo el catálogo"]
                },
                "precios": {
                    answer: "Los precios de nuestros productos varían dependiendo del tipo de pieza y el nivel de detalle. Puede ver los precios en nuestra sección 'Creaciones con Alma'. ¿Necesita saber el precio de algún producto en particular?",
                    buttons: ["Ver precios de los talleres", "Preguntar por un producto específico", "Volver al menú principal"]
                },
                "servicios": {
                    answer: "Ofrecemos servicios de creaciones a la medida, muebles de madera personalizados y un servicio de Concierge de Fechas Especiales, donde le recordamos sus fechas importantes. También ofrecemos clases y talleres para que pueda crear su propio legado. ¿Qué servicio le interesa más?",
                    buttons: ["Clases y Talleres", "Muebles a la Medida", "Concierge de Regalos", "Volver al menú principal"]
                },
                "clases y talleres": {
                    answer: "Contamos con varios talleres, incluyendo: un taller de bordado de muñecos, bordado creativo para parejas y clases personalizadas de tejido. También tenemos un taller de corte de madera para hacer muebles y otras creaciones. ¿Le gustaría recibir más información o agendar una clase?",
                    buttons: ["Agendar un taller", "Conocer precios de talleres", "Volver al menú principal"]
                },
                "muebles a la medida": {
                    answer: "Damos vida a sus ideas en madera. Realizamos piezas únicas de madera, desde pequeños adornos hasta muebles a la medida que reflejan tu estilo. Damos forma a tus ideas y a cualquier modelo de serie. ¿Le gustaría solicitar un presupuesto o ver algunos ejemplos de nuestro trabajo?",
                    buttons: ["Ver Galería de Madera", "Solicitar presupuesto por WhatsApp", "Volver al menú principal"]
                },
                "envios": {
                    answer: "Realizamos envíos seguros y garantizados a todo el Ecuador. Una vez que confirme su pedido, le proporcionaremos los detalles y el tiempo estimado de entrega. ¿Necesita ayuda para realizar un pedido?",
                    buttons: ["Finalizar mi compra", "Ver carrito", "Volver al menú principal"]
                },
                "volver al menú principal": {
                    answer: "¿En qué otra cosa podemos ayudarle?",
                    buttons: ["Productos", "Servicios", "Precios", "Envíos"]
                },
                 "saludo": {
                    answer: "¡Hola! ¿Cómo está? Es un gusto saludarle. ¿En qué le puedo asistir el día de hoy?",
                    buttons: ["Productos", "Servicios", "Precios", "Envíos"]
                },
                 "despedida": {
                    answer: "Ha sido un placer asistirlo/a. Si necesita algo más, no dude en contactarnos. ¡Que tenga un excelente día!",
                    buttons: ["Volver al menú principal", "Cerrar chat"]
                },
                "iniciar chat": {
                    answer: "¡Excelente! Estoy listo/a. Le puedo guiar por estas opciones. Si tiene una pregunta específica, por favor, escriba.",
                    buttons: ["Productos", "Servicios", "Clases y Talleres", "Muebles a la Medida"]
                }
            },
            fallback: "Disculpe, no he entendido su pregunta. Le puedo ayudar con las siguientes opciones:",
            generic_buttons: ["Productos", "Servicios", "Clases y Talleres", "Muebles a la Medida", "Envíos"]
        };

        const createMessage = (text, sender) => {
            const msgEl = document.createElement('div');
            msgEl.className = `chatbot-message ${sender === 'bot' ? 'bot rounded-br-none self-start' : 'user rounded-bl-none self-end'}`;
            msgEl.textContent = text;
            chatbotBody.appendChild(msgEl);
            chatbotBody.scrollTop = chatbotBody.scrollHeight;
        };

        const createQuickReplies = (buttons) => {
            quickReplies.innerHTML = '';
            buttons.forEach(text => {
                const btn = document.createElement('button');
                btn.className = 'bg-gray-200 text-text-dark text-sm px-4 py-2 rounded-full hover:bg-gray-300 transition-colors';
                btn.textContent = text;
                btn.addEventListener('click', () => handleUserInput(text));
                quickReplies.appendChild(btn);
            });
        };
        
        const handleUserInput = (message) => {
            createMessage(message, 'user');
            chatbotInput.value = '';
            message = message.toLowerCase();
            let response = chatbotData.fallback;
            let responseButtons = chatbotData.generic_buttons;
            const keywords = Object.keys(chatbotData.faq);
            let foundKeyword = null;
            for (const keyword of keywords) {
                if (message.includes(keyword)) {
                    foundKeyword = keyword;
                    break;
                }
            }

            if (foundKeyword) {
                response = chatbotData.faq[foundKeyword].answer;
                responseButtons = chatbotData.faq[foundKeyword].buttons;
            } else if (message.includes("hola") || message.includes("saludos") || message.includes("buenas")) {
                response = chatbotData.faq.saludo.answer;
                responseButtons = chatbotData.faq.saludo.buttons;
            } else if (message.includes("gracias") || message.includes("adios") || message.includes("chao")) {
                response = chatbotData.faq.despedida.answer;
                responseButtons = chatbotData.faq.despedida.buttons;
            } else if (message.includes("carro") || message.includes("carrito") || message.includes("comprar")) {
                response = chatbotData.faq.envios.answer;
                responseButtons = chatbotData.faq.envios.buttons;
            }
            setTimeout(() => {
                createMessage(response, 'bot');
                createQuickReplies(responseButtons);
            }, 500);
        };

        chatbotBtn.addEventListener('click', () => {
            openModal(chatbotModal);
            createMessage(chatbotData.greetings[0], 'bot');
            createQuickReplies(["Productos", "Servicios", "Clases y Talleres"]);
        });
        closeChatbotBtn.addEventListener('click', () => closeModal(chatbotModal));
        sendChatbotBtn.addEventListener('click', () => {
            const message = chatbotInput.value.trim();
            if (message) handleUserInput(message);
        });
        chatbotInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && chatbotInput.value.trim()) handleUserInput(chatbotInput.value.trim());
        });
        
        // --- Lógica del Countdown ---
        const countdownDate = new Date("October 25, 2025 00:00:00").getTime();
        const countdown = setInterval(() => {
            const now = new Date().getTime();
            const distance = countdownDate - now;
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            document.getElementById("days").textContent = String(days).padStart(2, '0');
            document.getElementById("hours").textContent = String(hours).padStart(2, '0');
            document.getElementById("minutes").textContent = String(minutes).padStart(2, '0');
            document.getElementById("seconds").textContent = String(seconds).padStart(2, '0');

            if (distance < 0) {
                clearInterval(countdown);
                document.getElementById("countdown").innerHTML = "¡Oferta Expirada!";
            }
        }, 1000);

        // --- INICIALIZACIÓN ---
        updateCartUI();
        renderCalendar();
    });
    </script>
</body>
</html>

